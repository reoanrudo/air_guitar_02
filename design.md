# è¨­è¨ˆæ›¸

## æ¦‚è¦

VirtuTuneã¯Djangoãƒ™ãƒ¼ã‚¹ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã€ä»®æƒ³ã‚®ã‚¿ãƒ¼æ¼”å¥æ©Ÿèƒ½ã¨é€²æ—ç®¡ç†æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚MVCã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã€Djangoã‚¢ãƒ—ãƒªã‚’æ©Ÿèƒ½å˜ä½ã«åˆ†å‰²ã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆã¨ã—ã¾ã™ã€‚

### ãƒšãƒ«ã‚½ãƒŠãƒ™ãƒ¼ã‚¹è¨­è¨ˆæ–¹é‡

VirtuTuneã®è¨­è¨ˆã¯ã€3ã¤ã®ãƒšãƒ«ã‚½ãƒŠãã‚Œãã‚ŒãŒæŠ±ãˆã‚‹èª²é¡Œã¨ãƒ‹ãƒ¼ã‚ºã«å¯¾å¿œã™ã‚‹ã‚ˆã†ã«æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

| ãƒšãƒ«ã‚½ãƒŠ | ä¸»è¦ãªèª²é¡Œ | å¯¾å¿œã™ã‚‹è¨­è¨ˆè¦ç´  |
|---------|-----------|-----------------|
| **ãƒšãƒ«ã‚½ãƒŠ1**<br>ï¼ˆã‚®ã‚¿ãƒ¼åˆå¿ƒè€…ï¼‰ | - æ¥½å™¨ã‚’æŒã£ã¦ã„ãªã„<br>- ä½•ã‹ã‚‰å§‹ã‚ã¦ã„ã„ã‹ã‚ã‹ã‚‰ãªã„<br>- æ°—è»½ã«ä½“é¨“ã—ãŸã„ | - ä»®æƒ³ã‚®ã‚¿ãƒ¼ï¼ˆè¦ä»¶1ï¼‰<br>- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆè¦ä»¶13ï¼‰<br>- ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ï¼ˆè¦ä»¶11ï¼‰ |
| **ãƒšãƒ«ã‚½ãƒŠ2**<br>ï¼ˆæŒ«æŠ˜çµŒé¨“è€…ï¼‰ | - Fã‚³ãƒ¼ãƒ‰ç­‰ã®æŠ€è¡“çš„å£<br>- å·¦æ‰‹ã®æŒ‡ãŒç—›ã„<br>- ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ãŸã„ | - ã‚¹ãƒãƒ›PCé€£æºï¼ˆè¦ä»¶9ï¼‰<br>- ã‚«ãƒ¡ãƒ©ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ï¼ˆè¦ä»¶10ï¼‰<br>- å·¦æ‰‹å…¥åŠ›ã®å·¥å¤« |
| **ãƒšãƒ«ã‚½ãƒŠ3**<br>ï¼ˆç¶™ç¶šã—ãŸã„å­¦ç¿’è€…ï¼‰ | - ç·´ç¿’ã‚’å¿˜ã‚Œã‚‹<br>- ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç¶­æŒ<br>- æˆé•·ã‚’å®Ÿæ„Ÿã—ãŸã„ | - é€²æ—è¡¨ç¤ºï¼ˆè¦ä»¶3ï¼‰<br>- ç›®æ¨™è¨­å®šï¼ˆè¦ä»¶4ï¼‰<br>- ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ï¼ˆè¦ä»¶5ï¼‰ |

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹è¨­è¨ˆåŸå‰‡

1. **ãƒšãƒ«ã‚½ãƒŠ1ï¼ˆåˆå¿ƒè€…ï¼‰ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**
   - åˆå›è¨ªå•ã‹ã‚‰5åˆ†ä»¥å†…ã«æ¼”å¥ä½“é¨“ã‚’æä¾›
   - èª¬æ˜ã‚’æœ€å°é™ã«ã«ã—ã€ç›´æ„Ÿçš„ãªæ“ä½œã‚’é‡è¦–
   - å°ã•ãªæˆåŠŸä½“é¨“ã‚’ç©ã¿é‡ã­ã‚‹è¨­è¨ˆ

2. **ãƒšãƒ«ã‚½ãƒŠ2ï¼ˆæŒ«æŠ˜çµŒé¨“è€…ï¼‰ã®é…æ…®**
   - å·¦æ‰‹æ“ä½œã¯ã‚¹ãƒãƒ›ã®ã‚¿ãƒƒãƒï¼ˆç—›ã¿ãªã—ï¼‰
   - å¾“æ¥ã®æŒ«æŠ˜è¦å› ï¼ˆFã‚³ãƒ¼ãƒ‰ç­‰ï¼‰ã‚’å›é¿
   - ã€Œä»Šå›ã¯ç¶šã‘ã‚‰ã‚Œã‚‹ã€ã¨ã„ã†å®Ÿæ„Ÿã‚’æä¾›

3. **ãƒšãƒ«ã‚½ãƒŠ3ï¼ˆç¶™ç¶šã—ãŸã„ï¼‰ã¸ã®å‹•æ©Ÿä»˜ã‘**
   - å¯è¦–çš„ãªé€²æ—ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
   - ç¤¾ä¼šçš„è¦ç´ ï¼ˆãƒ©ãƒ³ã‚­ãƒ³ã‚°ã€å®Ÿç¸¾ï¼‰
   - ç¿’æ…£åŒ–ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TD
    Smartphone[ã‚¹ãƒãƒ›] -->|HTTPS/WSS| MobileAPI[ãƒ¢ãƒã‚¤ãƒ«API]
    PC[PC Webã‚¢ãƒ—ãƒª] -->|HTTP| WebApp[Django Webã‚¢ãƒ—ãƒª]

    PC --> Camera[Webã‚«ãƒ¡ãƒ©]
    PC --> MediaPipe[MediaPipe Hands]
    PC --> WebSocket[WebSocketã‚µãƒ¼ãƒãƒ¼]
    PC --> URLRouter[URLãƒ«ãƒ¼ã‚¿ãƒ¼]

    URLRouter --> CoreApp[ã‚³ã‚¢ã‚¢ãƒ—ãƒª]
    URLRouter --> GuitarApp[ä»®ã‚¿ãƒ¼ã‚¢ãƒ—ãƒª]
    URLRouter --> ProgressApp[é€²æ—ç®¡ç†ã‚¢ãƒ—ãƒª]
    URLRouter --> UsersApp[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒ—ãƒª]
    URLRouter --> GameApp[ã‚²ãƒ¼ãƒ ã‚¢ãƒ—ãƒª]
    URLRouter --> RankingApp[ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚¢ãƒ—ãƒª]

    GuitarApp --> ORM[Django ORM]
    ProgressApp --> ORM
    UsersApp --> ORM
    GameApp --> ORM
    RankingApp --> ORM

    ORM --> DB[(SQLite/PostgreSQL)]

    ProgressApp --> Celery[Celeryã‚¿ã‚¹ã‚¯]
    Celery --> Email[ãƒ¡ãƒ¼ãƒ«é€ä¿¡]

    WebSocket --> Realtime[ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ]
    MediaPipe --> Gesture[ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼èªè­˜]

    WebApp --> Static[é™çš„ãƒ•ã‚¡ã‚¤ãƒ«]
    WebApp --> Templates[ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ]
```

### ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | æ¦‚è¦ | ä¸»ãªå¯¾è±¡ãƒšãƒ«ã‚½ãƒŠ | é–¢é€£è¦ä»¶ |
|---------------|------|-----------------|----------|
| **Django Webã‚¢ãƒ—ãƒª** | ãƒ¡ã‚¤ãƒ³ã®Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | å…¨ãƒšãƒ«ã‚½ãƒŠ | - |
| **ä»®æƒ³ã‚®ã‚¿ãƒ¼ã‚¢ãƒ—ãƒª (guitar)** | ä»®æƒ³ã‚®ã‚¿ãƒ¼æ¼”å¥æ©Ÿèƒ½ | ãƒšãƒ«ã‚½ãƒŠ1, 2 | è¦ä»¶1, 9, 10 |
| **é€²æ—ç®¡ç†ã‚¢ãƒ—ãƒª (progress)** | ç·´ç¿’è¨˜éŒ²ã¨é€²æ—è¡¨ç¤º | ãƒšãƒ«ã‚½ãƒŠ3 | è¦ä»¶2, 3, 4 |
| **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒ—ãƒª (users)** | èªè¨¼ã¨ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç† | å…¨ãƒšãƒ«ã‚½ãƒŠ | è¦ä»¶6, 7 |
| **ã‚²ãƒ¼ãƒ ã‚¢ãƒ—ãƒª (game)** | ãƒªã‚ºãƒ ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ | ãƒšãƒ«ã‚½ãƒŠ1, 3 | è¦ä»¶11 |
| **ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚¢ãƒ—ãƒª (ranking)** | ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¨ã‚¹ã‚³ã‚¢ç®¡ç† | ãƒšãƒ«ã‚½ãƒŠ1 | è¦ä»¶13 |
| **ãƒ¢ãƒã‚¤ãƒ«API (mobile)** | ã‚¹ãƒãƒ›ç”¨APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒšãƒ«ã‚½ãƒŠ2 | è¦ä»¶9 |
| **WebSocketã‚µãƒ¼ãƒãƒ¼** | ãƒ‡ãƒã‚¤ã‚¹é–“ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ | ãƒšãƒ«ã‚½ãƒŠ2 | è¦ä»¶9, 10 |
| **ã‚³ã‚¢ã‚¢ãƒ—ãƒª (core)** | å…±é€šæ©Ÿèƒ½ã¨ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ | å…¨ãƒšãƒ«ã‚½ãƒŠ | è¦ä»¶8 |
| **Celery** | éåŒæœŸã‚¿ã‚¹ã‚¯ï¼ˆãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡ï¼‰ | ãƒšãƒ«ã‚½ãƒŠ3 | è¦ä»¶5 |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** | SQLiteï¼ˆé–‹ç™ºï¼‰/ PostgreSQLï¼ˆæœ¬ç•ªï¼‰ | - | - |
| **MediaPipe Hands** | ã‚«ãƒ¡ãƒ©ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼èªè­˜ï¼ˆJSãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰ | ãƒšãƒ«ã‚½ãƒŠ2 | è¦ä»¶10 |

**è¨­è¨ˆæ–¹é‡:**
- **ãƒšãƒ«ã‚½ãƒŠ1ï¼ˆåˆå¿ƒè€…ï¼‰**: ä»®æƒ³ã‚®ã‚¿ãƒ¼ã€ã‚²ãƒ¼ãƒ ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã§ã€Œæ°—è»½ã«å§‹ã‚ã‚‰ã‚Œã‚‹ã€ã€ŒéŠã³ãªãŒã‚‰å­¦ã¹ã‚‹ã€ã‚’é‡è¦–
- **ãƒšãƒ«ã‚½ãƒŠ2ï¼ˆæŒ«æŠ˜çµŒé¨“è€…ï¼‰**: ã‚¹ãƒãƒ›PCé€£æºã€ã‚«ãƒ¡ãƒ©ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã§ã€Œå¾“æ¥ã®æŒ«æŠ˜è¦å› ã‚’å›é¿ã€
- **ãƒšãƒ«ã‚½ãƒŠ3ï¼ˆç¶™ç¶šã—ãŸã„ï¼‰**: é€²æ—ç®¡ç†ã€ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã§ã€Œç¿’æ…£åŒ–ã¨ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç¶­æŒã€ã‚’ã‚µãƒãƒ¼ãƒˆ

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant U as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant S as ã‚¹ãƒãƒ›
    participant PC as PC
    participant WS as WebSocket
    participant Cam as ã‚«ãƒ¡ãƒ©
    participant MP as MediaPipe

    Note over S,PC: ãƒ‡ãƒã‚¤ã‚¹é€£æºãƒ•ãƒ­ãƒ¼
    PC->>PC: QRã‚³ãƒ¼ãƒ‰è¡¨ç¤º
    S->>PC: QRã‚³ãƒ¼ãƒ‰èª­ã¿å–ã‚Š
    PC->>WS: WebSocketæ¥ç¶šç¢ºç«‹
    WS-->>S: ã‚»ãƒƒã‚·ãƒ§ãƒ³IDé€ä¿¡

    Note over S,PC: æ¼”å¥ãƒ•ãƒ­ãƒ¼
    S->>WS: ã‚³ãƒ¼ãƒ‰å¤‰æ›´ï¼ˆCâ†’Amï¼‰
    WS->>PC: ã‚³ãƒ¼ãƒ‰å¤‰æ›´é€šçŸ¥

    Note over PC,Cam: ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æ¤œçŸ¥ãƒ•ãƒ­ãƒ¼
    PC->>Cam: ã‚«ãƒ¡ãƒ©èµ·å‹•
    Cam->>MP: æ˜ åƒãƒ•ãƒ¬ãƒ¼ãƒ 
    MP->>MP: æ‰‹æ¤œå‡ºãƒ»è§£æ
    MP->>PC: ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æ¤œçŸ¥ã‚¤ãƒ™ãƒ³ãƒˆ
    PC->>PC: éŸ³å£°å†ç”Ÿ

    Note over PC,DB: ç·´ç¿’è¨˜éŒ²ãƒ•ãƒ­ãƒ¼
    PC->>PC: ç·´ç¿’çµ‚äº†
    PC->>PC: ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ä¿å­˜
```

---

### ãƒšãƒ¼ã‚¸é·ç§»å›³

```mermaid
graph TD
    %% æœªãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹
    Index[ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ /] --> Signup[ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ— /signup/]
    Index --> Login[ãƒ­ã‚°ã‚¤ãƒ³ /login/]
    Signup --> Index{ç™»éŒ²æˆåŠŸ}
    Login --> Index{ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ}

    %% ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ãƒ¡ã‚¤ãƒ³ç”»é¢
    Index --> Guitar[ä»®æƒ³ã‚®ã‚¿ãƒ¼ /guitar/]
    Guitar --> Progress[é€²æ—ç®¡ç† /progress/]
    Guitar --> Game[ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ /game/]
    Guitar --> Ranking[ãƒ©ãƒ³ã‚­ãƒ³ã‚° /ranking/]
    Guitar --> Profile[ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« /profile/]

    %% é€²æ—ç®¡ç†ã‹ã‚‰
    Progress --> Guitar
    Progress --> Profile

    %% ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ã‹ã‚‰
    Game --> GameResult[ã‚²ãƒ¼ãƒ çµæœ /game/result/]
    GameResult --> Game
    GameResult --> Ranking

    %% ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‹ã‚‰
    Ranking --> Game
    Ranking --> Guitar

    %% ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‹ã‚‰
    Profile --> Index{ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ}
    Profile --> Guitar

    %% ã‚¹ãƒãƒ›ç”¨ãƒ¢ãƒã‚¤ãƒ«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
    QR[QRã‚³ãƒ¼ãƒ‰ /qr/] --> Controller[ãƒ¢ãƒã‚¤ãƒ«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ /mobile/controller/]
    Controller -.->|WebSocket| Guitar

    %% ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
    classDef public fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef auth fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef main fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef mobile fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px

    class Index,Signup,Login auth
    class Guitar,Progress,Game,Ranking,Profile,GameResult main
    class QR,Controller mobile
```

### URLãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ§‹æˆ

| URL | ãƒ“ãƒ¥ãƒ¼ | èªè¨¼ | å¯¾è±¡ãƒšãƒ«ã‚½ãƒŠ | èª¬æ˜ |
|-----|-------|------|-------------|------|
| **/ (public)** | | | | |
| `/` | core.IndexView | - | å…¨ãƒšãƒ«ã‚½ãƒŠï¼ˆåˆå›ï¼‰ | ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ |
| `/signup/` | users.SignUpView | - | å…¨ãƒšãƒ«ã‚½ãƒŠ | ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ— |
| `/login/` | auth.LoginView | - | å…¨ãƒšãƒ«ã‚½ãƒŠ | ãƒ­ã‚°ã‚¤ãƒ³ |
| `/logout/` | auth.LogoutView | è¦ | å…¨ãƒšãƒ«ã‚½ãƒŠ | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ |
| **/guitar (main)** | | | | |
| `/guitar/` | guitar.GuitarView | è¦ | ãƒšãƒ«ã‚½ãƒŠ1, 2 | ä»®æƒ³ã‚®ã‚¿ãƒ¼æ¼”å¥ç”»é¢ |
| `/guitar/start/` | guitar.start_practice | è¦ | ãƒšãƒ«ã‚½ãƒŠ1, 2 | ç·´ç¿’é–‹å§‹API |
| `/guitar/end/` | guitar.end_practice | è¦ | ãƒšãƒ«ã‚½ãƒŠ1, 2 | ç·´ç¿’çµ‚äº†API |
| `/guitar/change/` | guitar.change_chord | è¦ | ãƒšãƒ«ã‚½ãƒŠ1, 2 | ã‚³ãƒ¼ãƒ‰å¤‰æ›´API |
| **/progress** | | | | |
| `/progress/` | progress.ProgressView | è¦ | ãƒšãƒ«ã‚½ãƒŠ3 | é€²æ—è¡¨ç¤ºãƒšãƒ¼ã‚¸ |
| `/progress/api/stats/` | progress.api_stats | è¦ | ãƒšãƒ«ã‚½ãƒŠ3 | çµ±è¨ˆãƒ‡ãƒ¼ã‚¿API |
| **/game** | | | | |
| `/game/` | game.GameListView | è¦ | ãƒšãƒ«ã‚½ãƒŠ1, 3 | æ¥½æ›²é¸æŠç”»é¢ |
| `/game/play/<int:song_id>/` | game.GamePlayView | è¦ | ãƒšãƒ«ã‚½ãƒŠ1, 3 | ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ç”»é¢ |
| `/game/result/<int:session_id>/` | game.GameResultView | è¦ | ãƒšãƒ«ã‚½ãƒŠ1, 3 | ã‚²ãƒ¼ãƒ çµæœç”»é¢ |
| **/ranking** | | | | |
| `/ranking/` | ranking.RankingView | è¦ | ãƒšãƒ«ã‚½ãƒŠ1 | ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒšãƒ¼ã‚¸ |
| `/ranking/api/daily/` | ranking.api_daily | è¦ | ãƒšãƒ«ã‚½ãƒŠ1 | æ—¥æ¬¡ãƒ©ãƒ³ã‚­ãƒ³ã‚°API |
| `/ranking/api/weekly/` | ranking.api_weekly | è¦ | ãƒšãƒ«ã‚½ãƒŠ1 | é€±é–“ãƒ©ãƒ³ã‚­ãƒ³ã‚°API |
| **/profile** | | | | |
| `/profile/` | users.ProfileView | è¦ | å…¨ãƒšãƒ«ã‚½ãƒŠ | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ |
| `/profile/update/` | users.ProfileUpdateView | è¦ | å…¨ãƒšãƒ«ã‚½ãƒŠ | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–° |
| `/profile/delete/` | users.AccountDeleteView | è¦ | å…¨ãƒšãƒ«ã‚½ãƒŠ | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤ |
| **/mobile (smartphone)** | | | | |
| `/mobile/qr/` | mobile.qr_code | è¦ | ãƒšãƒ«ã‚½ãƒŠ2 | QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ |
| `/mobile/controller/` | mobile.controller | - | ãƒšãƒ«ã‚½ãƒŠ2 | ãƒ¢ãƒã‚¤ãƒ«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ |
| **/websocket** | | | | |
| `/ws/guitar/<session_id>/` | websocket.GuitarConsumer | è¦ | ãƒšãƒ«ã‚½ãƒŠ2 | WebSocketã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ |

---

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

### ã‚³ã‚¢ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

```python
# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
from typing import Optional
from datetime import datetime, time

class User:
    id: int
    username: str
    email: str
    daily_goal_minutes: int
    reminder_enabled: bool
    reminder_time: Optional[time]
    streak_days: int
    total_practice_minutes: int
    created_at: datetime
    updated_at: datetime

# ç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
class PracticeSession:
    id: int
    user_id: int
    started_at: datetime
    ended_at: Optional[datetime]
    duration_minutes: int
    chords_practiced: list[str]  # JSONãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    created_at: datetime

# ã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
class Chord:
    id: int
    name: str
    finger_positions: dict  # {"E2": 0, "A2": 1, "D2": 0, "G1": 2, "B1": 0, "e1": 0}
    difficulty: int
    diagram: str  # SVGå½¢å¼
```

---

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: ä»®æƒ³ã‚®ã‚¿ãƒ¼ (guitar)

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** ğŸ”´ æœªå®Ÿè£…

**è²¬å‹™:**
- ä»®æƒ³ã‚®ã‚¿ãƒ¼ç”»é¢ã®æç”»
- ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®æä¾›
- å¼¦ã®æ“ä½œã«å¿œã˜ãŸéŸ³å£°å†ç”Ÿ
- ã‚³ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆå‡¦ç†

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class GuitarView:
    def get_guitar_page(request) -> HttpResponse
    def get_chord_data(chord_name: str) -> dict
    def play_string_sound(string_number: int, chord: Chord) -> None
    def change_chord(request) -> JsonResponse
```

**ä¾å­˜é–¢ä¿‚:**
- Django ORM
- Chordãƒ¢ãƒ‡ãƒ«
- é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆéŸ³å£°ã€SVGï¼‰

**å®Ÿè£…ãƒ¡ãƒ¢:**
- éŸ³å£°ã¯HTML5 Audio APIã§å†ç”Ÿ
- å¼¦ã®æŒ¯å‹•ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯CSS Animationã§å®Ÿè£…
- ã‚³ãƒ¼ãƒ‰ãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ã¯å‹•çš„ã«SVGç”Ÿæˆ

---

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: é€²æ—ç®¡ç† (progress)

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** ğŸ”´ æœªå®Ÿè£…

**è²¬å‹™:**
- ç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä½œæˆãƒ»æ›´æ–°
- é€²æ—ãƒ‡ãƒ¼ã‚¿ã®é›†è¨ˆ
- ã‚°ãƒ©ãƒ•ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆ
- ã‚¹ãƒˆãƒªãƒ¼ã‚¯è¨ˆç®—

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class ProgressService:
    def start_session(user: User) -> PracticeSession
    def end_session(session: PracticeSession, chords: list[str]) -> None
    def get_daily_stats(user: User, days: int) -> list[dict]
    def get_total_stats(user: User) -> dict
    def calculate_streak(user: User) -> int
    def check_goal_achievement(user: User) -> bool
```

**ä¾å­˜é–¢ä¿‚:**
- PracticeSessionãƒ¢ãƒ‡ãƒ«
- Userãƒ¢ãƒ‡ãƒ«

**å®Ÿè£…ãƒ¡ãƒ¢:**
- ã‚¹ãƒˆãƒªãƒ¼ã‚¯ã¯æ—¥æ¬¡ãƒãƒƒãƒã§æ›´æ–°
- ã‚°ãƒ©ãƒ•ãƒ‡ãƒ¼ã‚¿ã¯JSONã§è¿”å´

---

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† (users)

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** ğŸ”´ æœªå®Ÿè£…

**è²¬å‹™:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç†
- ç›®æ¨™è¨­å®š
- ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®š

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class UserService:
    def create_user(email: str, password: str, username: str) -> User
    def update_profile(user: User, **kwargs) -> None
    def update_daily_goal(user: User, minutes: int) -> None
    def update_reminder_settings(user: User, enabled: bool, time: time) -> None
    def delete_user(user: User) -> None
```

**ä¾å­˜é–¢ä¿‚:**
- Django Authentication System
- Userãƒ¢ãƒ‡ãƒ«

---

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ (reminders)

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** ğŸ”´ æœªå®Ÿè£…

**è²¬å‹™:**
- å®šæ™‚ãƒ¡ãƒ¼ãƒ«é€ä¿¡
- æœªç·´ç¿’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¤œå‡º
- è­¦å‘Šãƒ¡ãƒ¼ãƒ«é€ä¿¡

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class ReminderService:
    def send_daily_reminders() -> None
    def send_streak_warning(user: User, missed_days: int) -> None
    def get_users_for_reminder() -> QuerySet[User]
```

**ä¾å­˜é–¢ä¿‚:**
- Celery
- Django Email Backend
- Userãƒ¢ãƒ‡ãƒ«

---

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: ã‚³ã‚¢ (core)

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** ğŸ”´ æœªå®Ÿè£…

**è²¬å‹™:**
- ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æä¾›
- å…±é€šã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ—ãƒ­ã‚»ãƒƒã‚µ
- é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
- å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class CoreUtils:
    def get_base_context(request) -> dict
    def format_duration(minutes: int) -> str
    def calculate_level(total_minutes: int) -> int
```

---

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: ã‚²ãƒ¼ãƒ  (game)

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** ğŸ”´ æœªå®Ÿè£…

**è²¬å‹™:**
- ãƒªã‚ºãƒ ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ã®æä¾›
- éŸ³æ¥½ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†
- ã‚¹ã‚³ã‚¢è¨ˆç®—ã¨ä¿å­˜
- ã‚²ãƒ¼ãƒ ãƒãƒ©ãƒ³ã‚¹èª¿æ•´

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class GameService:
    def get_song(song_id: int) -> Song
    def calculate_score(note_hits: list, note_misses: list) -> int
    def save_game_score(user: User, song_id: int, score: int) -> GameSession
    def get_leaderboard(song_id: int, period: str) -> list
```

**ä¾å­˜é–¢ä¿‚:**
- Songãƒ¢ãƒ‡ãƒ«
- GameSessionãƒ¢ãƒ‡ãƒ«
- Scoreãƒ¢ãƒ‡ãƒ«

---

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: ãƒ©ãƒ³ã‚­ãƒ³ã‚° (ranking)

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** ğŸ”´ æœªå®Ÿè£…

**è²¬å‹™:**
- ãƒ©ãƒ³ã‚­ãƒ³ã‚°é›†è¨ˆã¨è¡¨ç¤º
- æ—¥æ¬¡ãƒ»é€±é–“ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®ç”Ÿæˆ
- å®Ÿç¸¾ãƒ»ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 
- ãƒãƒ³ãƒ‰ãƒ«ãƒãƒ¼ãƒ ç”Ÿæˆ

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class RankingService:
    def get_daily_leaderboard(limit: int = 100) -> list
    def get_weekly_leaderboard(limit: int = 100) -> list
    def get_user_rank(user: User, song_id: int) -> int
    def unlock_achievement(user: User, achievement_id: str) -> bool
```

**ä¾å­˜é–¢ä¿‚:**
- Scoreãƒ¢ãƒ‡ãƒ«
- Achievementãƒ¢ãƒ‡ãƒ«
- Userãƒ¢ãƒ‡ãƒ«

---

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: WebSocketã‚µãƒ¼ãƒãƒ¼ (websocket)

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** ğŸ”´ æœªå®Ÿè£…

**è²¬å‹™:**
- ã‚¹ãƒãƒ›ã¨PCã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡
- ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆã®é…ä¿¡
- æ¥ç¶šç®¡ç†

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class WebSocketConsumer(AsyncWebsocketConsumer):
    async def connect(self): ...
    async def receive(self, text_data): ...
    async def chord_change(self, chord_name: str): ...
    async def disconnect(self, close_code): ...
```

**ä¾å­˜é–¢ä¿‚:**
- channels (Django Channels)
    Redis (ãƒãƒ£ãƒãƒ«ãƒ¬ã‚¤ãƒ¤ãƒ¼)

---

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: ã‚«ãƒ¡ãƒ©ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼èªè­˜ (camera)

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** ğŸ”´ æœªå®Ÿè£…

**è²¬å‹™:**
- Webã‚«ãƒ¡ãƒ©ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
- MediaPipe Handsã«ã‚ˆã‚‹æ‰‹æ¤œå‡º
- ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯å‹•ä½œã®èªè­˜
- ã‚¿ã‚¤ãƒŸãƒ³ã‚°è¨ˆç®—

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class GestureRecognizer:
    async def start_camera(): ...
    async def detect_hand(): ...
    def is_strumming(landmarks, prev_landmarks) -> bool: ...
    def strum_velocity(landmarks) -> float: ...
```

**ä¾å­˜é–¢ä¿‚:**
- MediaPipe Hands (JavaScriptãƒ©ã‚¤ãƒ–ãƒ©ãƒª)
    MediaDevices API
    OpenCV.js (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

---

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: ãƒ¢ãƒã‚¤ãƒ«API (mobile)

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** ğŸ”´ æœªå®Ÿè£…

**è²¬å‹™:**
- ã‚¹ãƒãƒ›ç”¨APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ç”»é¢ç”¨ãƒ‡ãƒ¼ã‚¿æä¾›

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class MobileAPI:
    @require_http
    def qr_code(request): # QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
        ...
    @require_http
    def chord_list(request): # ã‚³ãƒ¼ãƒ‰ä¸€è¦§
        ...
    @require_http
    def chord_change(request): # ã‚³ãƒ¼ãƒ‰å¤‰æ›´
        ...
```

**ä¾å­˜é–¢ä¿‚:**
- Django REST Framework
    qrcodeãƒ©ã‚¤ãƒ–ãƒ©ãƒª
    Chordãƒ¢ãƒ‡ãƒ«

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### ERå›³

```mermaid
erDiagram
    users ||--o{ practice_sessions : "ç·´ç¿’è¨˜éŒ²"
    users ||--o{ game_sessions : "ã‚²ãƒ¼ãƒ ã‚»ãƒƒã‚·ãƒ§ãƒ³"
    users ||--o{ scores : "ã‚¹ã‚³ã‚¢"
    users ||--o{ user_achievements : "å®Ÿç¸¾å–å¾—"
    users ||--o{ user_chords : "ç¿’å¾—ã‚³ãƒ¼ãƒ‰"
    chords ||--o{ user_chords : "ç¿’å¾—çŠ¶æ³"
    chords ||--o{ practice_sessions : "ä½¿ç”¨ã‚³ãƒ¼ãƒ‰(JSON)"
    songs ||--o{ game_sessions : "æ¥½æ›²ãƒ‡ãƒ¼ã‚¿"
    songs ||--o{ song_notes : "éŸ³ç¬¦ãƒ‡ãƒ¼ã‚¿"
    achievements ||--o{ user_achievements : "ãƒ¦ãƒ¼ã‚¶ãƒ¼å®Ÿç¸¾"

    users {
        BIGINT id PK
        VARCHAR(150) username UK
        VARCHAR(254) email UK
        VARCHAR(128) password
        INT daily_goal_minutes "5åˆ†"
        BOOLEAN reminder_enabled
        TIME reminder_time
        INT streak_days
        INT total_practice_minutes
        DATE last_practice_date
        TIMESTAMP created_at
        TIMESTAMP updated_at
    }

    practice_sessions {
        BIGINT id PK
        BIGINT user_id FK
        TIMESTAMP started_at
        TIMESTAMP ended_at
        INT duration_minutes
        JSON chords_practiced
        BOOLEAN goal_achieved
        TIMESTAMP created_at
    }

    game_sessions {
        BIGINT id PK
        BIGINT user_id FK
        SMALLINT song_id FK
        INT score
        INT max_combo
        INT perfect_count
        INT great_count
        INT good_count
        INT miss_count
        FLOAT accuracy
        TIMESTAMP created_at
    }

    scores {
        BIGINT id PK
        BIGINT user_id FK
        SMALLINT song_id FK
        INT score
        DATE date
        TIMESTAMP created_at
    }

    songs {
        SMALLINT id PK
        VARCHAR(255) name UK
        VARCHAR(255) artist
        INT difficulty
        INT tempo
        JSON notes "éŸ³ç¬¦ã‚·ãƒ¼ã‚±ãƒ³ã‚¹"
        INT duration_seconds
        SMALLINT display_order
    }

    song_notes {
        BIGINT id PK
        SMALLINT song_id FK
        INT note_number
        TIMESTAMP timing
        STRING note_name
        FLOAT duration
    }

    chords {
        SMALLINT id PK
        VARCHAR(10) name UK
        JSON finger_positions
        TINYINT difficulty
        TEXT diagram
        SMALLINT display_order
    }

    user_chords {
        BIGINT user_id FK
        SMALLINT chord_id FK
        INT practice_count
        TIMESTAMP last_practiced_at
        TINYINT proficiency_level
        TIMESTAMP created_at
        TIMESTAMP updated_at
    }

    achievements {
        BIGINT id PK
        VARCHAR(50) name UK
        VARCHAR(255) description
        TEXT icon_url
        SMALLINT tier
        INT unlock_score
        SMALLINT display_order
    }

    user_achievements {
        BIGINT user_id FK
        BIGINT achievement_id FK
        TIMESTAMP unlocked_at
    }
```

---

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

#### ãƒ†ãƒ¼ãƒ–ãƒ«1: users (ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«)

Djangoã®èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’æ‹¡å¼µã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«ã€‚

| ã‚«ãƒ©ãƒ å | ã‚¿ã‚¤ãƒ— | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|-------|------|-----------|------|
| id | BIGINT | NO | AUTO | ä¸»ã‚­ãƒ¼ |
| username | VARCHAR(150) | NO | - | ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼ˆUNIQUEï¼‰ |
| email | VARCHAR(254) | NO | - | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆUNIQUEï¼‰ |
| password | VARCHAR(128) | NO | - | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥ |
| daily_goal_minutes | INTEGER | NO | 5 | 1æ—¥ã®ç›®æ¨™ç·´ç¿’æ™‚é–“ï¼ˆåˆ†ï¼‰ |
| reminder_enabled | BOOLEAN | NO | FALSE | ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ON/OFF |
| reminder_time | TIME | YES | NULL | ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡æ™‚åˆ» |
| streak_days | INTEGER | NO | 0 | é€£ç¶šç·´ç¿’æ—¥æ•° |
| total_practice_minutes | INTEGER | NO | 0 | ç·ç·´ç¿’æ™‚é–“ï¼ˆåˆ†ï¼‰ |
| last_practice_date | DATE | YES | NULL | æœ€çµ‚ç·´ç¿’æ—¥ |
| is_active | BOOLEAN | NO | TRUE | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæœ‰åŠ¹ãƒ•ãƒ©ã‚° |
| is_staff | BOOLEAN | NO | FALSE | ç®¡ç†è€…ãƒ•ãƒ©ã‚° |
| is_superuser | BOOLEAN | NO | FALSE | ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ©ã‚° |
| last_login | TIMESTAMP | YES | NULL | æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚ |
| date_joined | TIMESTAMP | NO | NOW | ç™»éŒ²æ—¥æ™‚ |
| created_at | TIMESTAMP | NO | NOW | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMP | NO | NOW | æ›´æ–°æ—¥æ™‚ |

**åˆ¶ç´„:**
- UNIQUE: `username`, `email`
- CHECK: `daily_goal_minutes` BETWEEN 1 AND 1440

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_username` ON (username)
- `idx_email` ON (email)
- `idx_streak` ON (streak_days DESC)
- `idx_last_practice` ON (last_practice_date)

---

#### ãƒ†ãƒ¼ãƒ–ãƒ«2: practice_sessions (ç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³)

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å„ç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚

| ã‚«ãƒ©ãƒ å | ã‚¿ã‚¤ãƒ— | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|-------|------|-----------|------|
| id | BIGINT | NO | AUTO | ä¸»ã‚­ãƒ¼ |
| user_id | BIGINT | NO | - | å¤–éƒ¨ã‚­ãƒ¼ï¼ˆusersï¼‰ |
| started_at | TIMESTAMP | NO | - | ç·´ç¿’é–‹å§‹æ™‚åˆ» |
| ended_at | TIMESTAMP | YES | NULL | ç·´ç¿’çµ‚äº†æ™‚åˆ» |
| duration_minutes | INTEGER | NO | 0 | ç·´ç¿’æ™‚é–“ï¼ˆåˆ†ï¼‰ |
| chords_practiced | JSON | NO | '[]' | ä½¿ç”¨ã—ãŸã‚³ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ |
| goal_achieved | BOOLEAN | YES | NULL | ç›®æ¨™é”æˆãƒ•ãƒ©ã‚° |
| created_at | TIMESTAMP | NO | NOW | ä½œæˆæ—¥æ™‚ |

**åˆ¶ç´„:**
- FOREIGN KEY: `user_id` â†’ users(id) ON DELETE CASCADE
- CHECK: `duration_minutes` >= 0
- CHECK: `ended_at` >= `started_at`

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_practice_user_started` ON (user_id, started_at DESC)
- `idx_practice_user_date` ON (user_id, DATE(started_at) DESC)

---

#### ãƒ†ãƒ¼ãƒ–ãƒ«3: chords (ã‚³ãƒ¼ãƒ‰ãƒã‚¹ã‚¿)

ã‚®ã‚¿ãƒ¼ã‚³ãƒ¼ãƒ‰ã®ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ã€‚

| ã‚«ãƒ©ãƒ å | ã‚¿ã‚¤ãƒ— | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|-------|------|-----------|------|
| id | SMALLINT | NO | AUTO | ä¸»ã‚­ãƒ¼ |
| name | VARCHAR(10) | NO | - | ã‚³ãƒ¼ãƒ‰åï¼ˆUNIQUEï¼‰ |
| finger_positions | JSON | NO | - | æŠ¼å¼¦ä½ç½®ãƒ‡ãƒ¼ã‚¿ |
| difficulty | TINYINT | NO | 1 | é›£æ˜“åº¦ï¼ˆ1-5ï¼‰ |
| diagram | TEXT | YES | NULL | ã‚³ãƒ¼ãƒ‰ãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ï¼ˆSVGï¼‰ |
| display_order | SMALLINT | NO | 0 | è¡¨ç¤ºé †åº |
| created_at | TIMESTAMP | NO | NOW | ä½œæˆæ—¥æ™‚ |

**åˆ¶ç´„:**
- UNIQUE: `name`
- CHECK: `difficulty` BETWEEN 1 AND 5

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_chords_name` ON (name)
- `idx_chords_difficulty` ON (difficulty)
- `idx_chords_display` ON (display_order)

**finger_positions JSONä¾‹:**
```json
{
  "E2": 0,  "A2": 0,
  "D2": 2,  "G1": 2,
  "B1": 1,  "e1": 0
}
```

---

#### ãƒ†ãƒ¼ãƒ–ãƒ«4: user_chords (ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¿’å¾—ã‚³ãƒ¼ãƒ‰)

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã©ã®ã‚³ãƒ¼ãƒ‰ã‚’ç¿’å¾—ã—ã¦ã„ã‚‹ã‹ã‚’è¿½è·¡ã—ã¾ã™ï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰ã€‚

| ã‚«ãƒ©ãƒ å | ã‚¿ã‚¤ãƒ— | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|-------|------|-----------|------|
| user_id | BIGINT | NO | - | å¤–éƒ¨ã‚­ãƒ¼ï¼ˆusersï¼‰ |
| chord_id | SMALLINT | NO | - | å¤–éƒ¨ã‚­ãƒ¼ï¼ˆchordsï¼‰ |
| practice_count | INTEGER | NO | 0 | ç·´ç¿’å›æ•° |
| last_practiced_at | TIMESTAMP | YES | NULL | æœ€çµ‚ç·´ç¿’æ—¥æ™‚ |
| proficiency_level | TINYINT | NO | 0 | ç¿’ç†Ÿåº¦ï¼ˆ0-5ï¼‰ |
| created_at | TIMESTAMP | NO | NOW | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMP | NO | NOW | æ›´æ–°æ—¥æ™‚ |

**åˆ¶ç´„:**
- PRIMARY KEY: (user_id, chord_id)
- FOREIGN KEY: `user_id` â†’ users(id) ON DELETE CASCADE
- FOREIGN KEY: `chord_id` â†’ chords(id) ON DELETE CASCADE
- CHECK: `proficiency_level` BETWEEN 0 AND 5

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_user_chords_user` ON (user_id)
- `idx_user_chords_proficiency` ON (proficiency_level)

---

### CREATE TABLEæ–‡ï¼ˆPostgreSQLç‰ˆï¼‰

```sql
-- =====================================================
-- VirtuTune Database Schema
-- PostgreSQL 15+
-- =====================================================

-- æ‹¡å¼µæ©Ÿèƒ½ã®æœ‰åŠ¹åŒ–
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    username VARCHAR(150) UNIQUE NOT NULL,
    email VARCHAR(254) UNIQUE NOT NULL,
    password VARCHAR(128) NOT NULL,
    first_name VARCHAR(150) DEFAULT '',
    last_name VARCHAR(150) DEFAULT '',
    daily_goal_minutes INTEGER NOT NULL DEFAULT 5,
    reminder_enabled BOOLEAN NOT NULL DEFAULT FALSE,
    reminder_time TIME,
    streak_days INTEGER NOT NULL DEFAULT 0,
    total_practice_minutes INTEGER NOT NULL DEFAULT 0,
    last_practice_date DATE,
    is_active BOOLEAN NOT NULL DEFAULT TRUE,
    is_staff BOOLEAN NOT NULL DEFAULT FALSE,
    is_superuser BOOLEAN NOT NULL DEFAULT FALSE,
    last_login TIMESTAMP WITH TIME ZONE,
    date_joined TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT chk_daily_goal_range CHECK (daily_goal_minutes BETWEEN 1 AND 1440)
);

CREATE INDEX idx_users_username ON users(username);
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_streak ON users(streak_days DESC);
CREATE INDEX idx_users_last_practice ON users(last_practice_date);

-- ã‚³ãƒ¼ãƒ‰ãƒã‚¹ã‚¿
CREATE TABLE chords (
    id SMALLSERIAL PRIMARY KEY,
    name VARCHAR(10) UNIQUE NOT NULL,
    finger_positions JSONB NOT NULL,
    difficulty SMALLINT NOT NULL DEFAULT 1,
    diagram TEXT,
    display_order SMALLINT NOT NULL DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT chk_difficulty_range CHECK (difficulty BETWEEN 1 AND 5)
);

CREATE INDEX idx_chords_name ON chords(name);
CREATE INDEX idx_chords_difficulty ON chords(difficulty);
CREATE INDEX idx_chords_display ON chords(display_order);

-- ç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³
CREATE TABLE practice_sessions (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    started_at TIMESTAMP WITH TIME ZONE NOT NULL,
    ended_at TIMESTAMP WITH TIME ZONE,
    duration_minutes INTEGER NOT NULL DEFAULT 0,
    chords_practiced JSONB NOT NULL DEFAULT '[]',
    goal_achieved BOOLEAN,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT chk_duration_positive CHECK (duration_minutes >= 0),
    CONSTRAINT chk_end_after_start CHECK (ended_at IS NULL OR ended_at >= started_at)
);

CREATE INDEX idx_practice_user_started ON practice_sessions(user_id, started_at DESC);
CREATE INDEX idx_practice_user_date ON practice_sessions(user_id, DATE(started_at) DESC);

-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¿’å¾—ã‚³ãƒ¼ãƒ‰ï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰
CREATE TABLE user_chords (
    user_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    chord_id SMALLINT NOT NULL REFERENCES chords(id) ON DELETE CASCADE,
    practice_count INTEGER NOT NULL DEFAULT 0,
    last_practiced_at TIMESTAMP WITH TIME ZONE,
    proficiency_level SMALLINT NOT NULL DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,

    PRIMARY KEY (user_id, chord_id),
    CONSTRAINT chk_proficiency_range CHECK (proficiency_level BETWEEN 0 AND 5)
);

CREATE INDEX idx_user_chords_user ON user_chords(user_id);
CREATE INDEX idx_user_chords_proficiency ON user_chords(proficiency_level);

-- æ¥½æ›²ãƒã‚¹ã‚¿
CREATE TABLE songs (
    id SMALLSERIAL PRIMARY KEY,
    name VARCHAR(255) UNIQUE NOT NULL,
    artist VARCHAR(255) NOT NULL,
    difficulty INTEGER NOT NULL DEFAULT 1,
    tempo INTEGER NOT NULL DEFAULT 120,
    notes JSONB NOT NULL DEFAULT '[]',
    duration_seconds INTEGER NOT NULL DEFAULT 0,
    display_order SMALLINT NOT NULL DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT chk_difficulty_range CHECK (difficulty BETWEEN 1 AND 5)
);

CREATE INDEX idx_songs_name ON songs(name);
CREATE INDEX idx_songs_difficulty ON songs(difficulty);
CREATE INDEX idx_songs_display ON songs(display_order);

-- éŸ³ç¬¦ãƒ‡ãƒ¼ã‚¿
CREATE TABLE song_notes (
    id BIGSERIAL PRIMARY KEY,
    song_id SMALLINT NOT NULL REFERENCES songs(id) ON DELETE CASCADE,
    note_number INTEGER NOT NULL,
    timing FLOAT NOT NULL,
    note_name VARCHAR(10) NOT NULL,
    duration FLOAT NOT NULL DEFAULT 0.5,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT uk_song_note UNIQUE (song_id, note_number)
);

CREATE INDEX idx_song_notes_song ON song_notes(song_id, note_number);

-- ã‚²ãƒ¼ãƒ ã‚»ãƒƒã‚·ãƒ§ãƒ³
CREATE TABLE game_sessions (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    song_id SMALLINT NOT NULL REFERENCES songs(id) ON DELETE CASCADE,
    score INTEGER NOT NULL DEFAULT 0,
    max_combo INTEGER NOT NULL DEFAULT 0,
    perfect_count INTEGER NOT NULL DEFAULT 0,
    great_count INTEGER NOT NULL DEFAULT 0,
    good_count INTEGER NOT NULL DEFAULT 0,
    miss_count INTEGER NOT NULL DEFAULT 0,
    accuracy FLOAT NOT NULL DEFAULT 0.0,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT chk_accuracy_range CHECK (accuracy BETWEEN 0 AND 1)
);

CREATE INDEX idx_game_user_date ON game_sessions(user_id, created_at DESC);
CREATE INDEX idx_game_song_score ON game_sessions(song_id, score DESC);

-- æ—¥æ¬¡ã‚¹ã‚³ã‚¢ï¼ˆãƒ©ãƒ³ã‚­ãƒ³ã‚°ç”¨ï¼‰
CREATE TABLE scores (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    song_id SMALLINT NOT NULL REFERENCES songs(id) ON DELETE CASCADE,
    score INTEGER NOT NULL DEFAULT 0,
    date DATE NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT uk_user_song_date UNIQUE (user_id, song_id, date)
);

CREATE INDEX idx_score_ranking ON scores(song_id, date, score DESC);

-- å®Ÿç¸¾ãƒã‚¹ã‚¿
CREATE TABLE achievements (
    id BIGSERIAL PRIMARY KEY,
    name VARCHAR(50) UNIQUE NOT NULL,
    description VARCHAR(255) NOT NULL,
    icon_url TEXT,
    tier SMALLINT NOT NULL DEFAULT 1,
    unlock_score INTEGER NOT NULL DEFAULT 0,
    display_order SMALLINT NOT NULL DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_achievements_tier ON achievements(tier);

-- ãƒ¦ãƒ¼ã‚¶ãƒ¼å®Ÿç¸¾
CREATE TABLE user_achievements (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    achievement_id BIGINT NOT NULL REFERENCES achievements(id) ON DELETE CASCADE,
    unlocked_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT uk_user_achievement UNIQUE (user_id, achievement_id)
);

CREATE INDEX idx_user_achievements_user ON user_achievements(user_id);
```

---

### CREATE TABLEæ–‡ï¼ˆSQLiteç‰ˆï¼‰

```sql
-- =====================================================
-- VirtuTune Database Schema
-- SQLite 3ï¼ˆé–‹ç™ºç’°å¢ƒç”¨ï¼‰
-- =====================================================

-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username VARCHAR(150) UNIQUE NOT NULL,
    email VARCHAR(254) UNIQUE NOT NULL,
    password VARCHAR(128) NOT NULL,
    first_name VARCHAR(150) DEFAULT '',
    last_name VARCHAR(150) DEFAULT '',
    daily_goal_minutes INTEGER NOT NULL DEFAULT 5
        CHECK (daily_goal_minutes BETWEEN 1 AND 1440),
    reminder_enabled BOOLEAN NOT NULL DEFAULT 0,
    reminder_time TEXT,
    streak_days INTEGER NOT NULL DEFAULT 0,
    total_practice_minutes INTEGER NOT NULL DEFAULT 0,
    last_practice_date DATE,
    is_active BOOLEAN NOT NULL DEFAULT 1,
    is_staff BOOLEAN NOT NULL DEFAULT 0,
    is_superuser BOOLEAN NOT NULL DEFAULT 0,
    last_login TIMESTAMP,
    date_joined TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_users_username ON users(username);
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_last_practice ON users(last_practice_date);

-- ã‚³ãƒ¼ãƒ‰ãƒã‚¹ã‚¿
CREATE TABLE chords (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(10) UNIQUE NOT NULL,
    finger_positions TEXT NOT NULL,
    difficulty INTEGER NOT NULL DEFAULT 1
        CHECK (difficulty BETWEEN 1 AND 5),
    diagram TEXT,
    display_order INTEGER NOT NULL DEFAULT 0,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_chords_name ON chords(name);
CREATE INDEX idx_chords_display ON chords(display_order);

-- ç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³
CREATE TABLE practice_sessions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    started_at TIMESTAMP NOT NULL,
    ended_at TIMESTAMP,
    duration_minutes INTEGER NOT NULL DEFAULT 0
        CHECK (duration_minutes >= 0),
    chords_practiced TEXT NOT NULL DEFAULT '[]',
    goal_achieved BOOLEAN,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CHECK (ended_at IS NULL OR ended_at >= started_at)
);

CREATE INDEX idx_practice_user_started ON practice_sessions(user_id, started_at DESC);

-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¿’å¾—ã‚³ãƒ¼ãƒ‰
CREATE TABLE user_chords (
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    chord_id INTEGER NOT NULL REFERENCES chords(id) ON DELETE CASCADE,
    practice_count INTEGER NOT NULL DEFAULT 0,
    last_practiced_at TIMESTAMP,
    proficiency_level INTEGER NOT NULL DEFAULT 0
        CHECK (proficiency_level BETWEEN 0 AND 5),
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (user_id, chord_id)
);

CREATE INDEX idx_user_chords_user ON user_chords(user_id);

-- æ¥½æ›²ãƒã‚¹ã‚¿
CREATE TABLE songs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(255) UNIQUE NOT NULL,
    artist VARCHAR(255) NOT NULL,
    difficulty INTEGER NOT NULL DEFAULT 1
        CHECK (difficulty BETWEEN 1 AND 5),
    tempo INTEGER NOT NULL DEFAULT 120,
    notes TEXT NOT NULL DEFAULT '[]',
    duration_seconds INTEGER NOT NULL DEFAULT 0,
    display_order INTEGER NOT NULL DEFAULT 0,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_songs_name ON songs(name);
CREATE INDEX idx_songs_display ON songs(display_order);

-- éŸ³ç¬¦ãƒ‡ãƒ¼ã‚¿
CREATE TABLE song_notes (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    song_id INTEGER NOT NULL REFERENCES songs(id) ON DELETE CASCADE,
    note_number INTEGER NOT NULL,
    timing REAL NOT NULL,
    note_name VARCHAR(10) NOT NULL,
    duration REAL NOT NULL DEFAULT 0.5,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UNIQUE (song_id, note_number)
);

CREATE INDEX idx_song_notes_song ON song_notes(song_id, note_number);

-- ã‚²ãƒ¼ãƒ ã‚»ãƒƒã‚·ãƒ§ãƒ³
CREATE TABLE game_sessions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    song_id INTEGER NOT NULL REFERENCES songs(id) ON DELETE CASCADE,
    score INTEGER NOT NULL DEFAULT 0,
    max_combo INTEGER NOT NULL DEFAULT 0,
    perfect_count INTEGER NOT NULL DEFAULT 0,
    great_count INTEGER NOT NULL DEFAULT 0,
    good_count INTEGER NOT NULL DEFAULT 0,
    miss_count INTEGER NOT NULL DEFAULT 0,
    accuracy REAL NOT NULL DEFAULT 0.0
        CHECK (accuracy >= 0 AND accuracy <= 1),
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_game_user_date ON game_sessions(user_id, created_at DESC);

-- æ—¥æ¬¡ã‚¹ã‚³ã‚¢
CREATE TABLE scores (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    song_id INTEGER NOT NULL REFERENCES songs(id) ON DELETE CASCADE,
    score INTEGER NOT NULL DEFAULT 0,
    date DATE NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UNIQUE (user_id, song_id, date)
);

CREATE INDEX idx_score_ranking ON scores(song_id, date, score DESC);

-- å®Ÿç¸¾ãƒã‚¹ã‚¿
CREATE TABLE achievements (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(50) UNIQUE NOT NULL,
    description VARCHAR(255) NOT NULL,
    icon_url TEXT,
    tier INTEGER NOT NULL DEFAULT 1,
    unlock_score INTEGER NOT NULL DEFAULT 0,
    display_order INTEGER NOT NULL DEFAULT 0,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_achievements_tier ON achievements(tier);

-- ãƒ¦ãƒ¼ã‚¶ãƒ¼å®Ÿç¸¾
CREATE TABLE user_achievements (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    achievement_id INTEGER NOT NULL REFERENCES achievements(id) ON DELETE CASCADE,
    unlocked_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UNIQUE (user_id, achievement_id)
);

CREATE INDEX idx_user_achievements_user ON user_achievements(user_id);
```

---

### Djangoãƒ¢ãƒ‡ãƒ«å®šç¾©

```python
# apps/users/models.py
from django.contrib.auth.models import AbstractUser
from django.db import models

class User(AbstractUser):
    daily_goal_minutes = models.IntegerField(default=5)
    reminder_enabled = models.BooleanField(default=False)
    reminder_time = models.TimeField(null=True, blank=True)
    streak_days = models.IntegerField(default=0)
    total_practice_minutes = models.IntegerField(default=0)
    last_practice_date = models.DateField(null=True, blank=True)

    class Meta:
        db_table = 'users'
        indexes = [
            models.Index(fields=['streak_days'], name='idx_streak'),
            models.Index(fields=['last_practice_date'], name='idx_last_practice'),
        ]
```

```python
# apps/guitar/models.py
from django.db import models

class Chord(models.Model):
    name = models.CharField(max_length=10, unique=True)
    finger_positions = models.JSONField()
    difficulty = models.SmallIntegerField(default=1)
    diagram = models.TextField(blank=True)
    display_order = models.SmallIntegerField(default=0)
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        db_table = 'chords'
        ordering = ['display_order', 'name']
```

```python
# apps/progress/models.py
from django.db import models
from django.conf import settings

class PracticeSession(models.Model):
    user = models.ForeignKey(
        settings.AUTH_USER_MODEL,
        on_delete=models.CASCADE,
        db_index=True
    )
    started_at = models.DateTimeField()
    ended_at = models.DateTimeField(null=True, blank=True)
    duration_minutes = models.IntegerField(default=0)
    chords_practiced = models.JSONField(default=list)
    goal_achieved = models.BooleanField(null=True, blank=True)
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        db_table = 'practice_sessions'
        indexes = [
            models.Index(fields=['user', 'started_at'], name='idx_practice_user_started'),
        ]

class UserChord(models.Model):
    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)
    chord = models.ForeignKey('guitar.Chord', on_delete=models.CASCADE)
    practice_count = models.IntegerField(default=0)
    last_practiced_at = models.DateTimeField(null=True, blank=True)
    proficiency_level = models.SmallIntegerField(default=0)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        db_table = 'user_chords'
        unique_together = [['user', 'chord']]
```

```python
# apps/game/models.py
from django.db import models
from django.conf import settings

class Song(models.Model):
    """æ¥½æ›²ãƒã‚¹ã‚¿"""
    name = models.CharField(max_length=255, unique=True)
    artist = models.CharField(max_length=255)
    difficulty = models.IntegerField(default=1)  # 1-5
    tempo = models.IntegerField(default=120)  # BPM
    notes = models.JSONField(default=list)  # éŸ³ç¬¦ã‚·ãƒ¼ã‚±ãƒ³ã‚¹
    duration_seconds = models.IntegerField(default=0)
    display_order = models.SmallIntegerField(default=0)
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        db_table = 'songs'
        ordering = ['display_order', 'name']

class SongNote(models.Model):
    """éŸ³ç¬¦ãƒ‡ãƒ¼ã‚¿"""
    song = models.ForeignKey(Song, on_delete=models.CASCADE, related_name='song_notes')
    note_number = models.IntegerField()
    timing = models.FloatField()  # ç§’å˜ä½
    note_name = models.CharField(max_length=10)  # C, D, E... ã¾ãŸã¯ã‚³ãƒ¼ãƒ‰å
    duration = models.FloatField(default=0.5)  # éŸ³ç¬¦ã®é•·ã•

    class Meta:
        db_table = 'song_notes'
        ordering = ['song', 'note_number']
        unique_together = [['song', 'note_number']]

class GameSession(models.Model):
    """ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ã‚»ãƒƒã‚·ãƒ§ãƒ³"""
    user = models.ForeignKey(
        settings.AUTH_USER_MODEL,
        on_delete=models.CASCADE,
        db_index=True
    )
    song = models.ForeignKey(Song, on_delete=models.CASCADE)
    score = models.IntegerField(default=0)
    max_combo = models.IntegerField(default=0)
    perfect_count = models.IntegerField(default=0)
    great_count = models.IntegerField(default=0)
    good_count = models.IntegerField(default=0)
    miss_count = models.IntegerField(default=0)
    accuracy = models.FloatField(default=0.0)
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        db_table = 'game_sessions'
        indexes = [
            models.Index(fields=['user', 'created_at'], name='idx_game_user_date'),
            models.Index(fields=['song', 'score'], name='idx_game_song_score'),
        ]

class Score(models.Model):
    """æ—¥æ¬¡ã‚¹ã‚³ã‚¢ï¼ˆãƒ©ãƒ³ã‚­ãƒ³ã‚°ç”¨ï¼‰"""
    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)
    song = models.ForeignKey(Song, on_delete=models.CASCADE)
    score = models.IntegerField(default=0)
    date = models.DateField()
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        db_table = 'scores'
        unique_together = [['user', 'song', 'date']]
        indexes = [
            models.Index(fields=['song', 'date', 'score'], name='idx_score_ranking'),
        ]
```

```python
# apps/ranking/models.py
from django.db import models
from django.conf import settings

class Achievement(models.Model):
    """å®Ÿç¸¾ãƒ»ãƒãƒƒã‚¸"""
    name = models.CharField(max_length=50, unique=True)
    description = models.CharField(max_length=255)
    icon_url = models.TextField(blank=True)  # SVGã¾ãŸã¯ç”»åƒURL
    tier = models.SmallIntegerField(default=1)  # 1=ãƒ–ãƒ­ãƒ³ã‚º, 2=ã‚·ãƒ«ãƒãƒ¼, 3=ã‚´ãƒ¼ãƒ«ãƒ‰
    unlock_score = models.IntegerField(default=0)  # è§£ç¦ã«å¿…è¦ãªã‚¹ã‚³ã‚¢
    display_order = models.SmallIntegerField(default=0)
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        db_table = 'achievements'
        ordering = ['display_order', 'tier', 'name']

class UserAchievement(models.Model):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼å®Ÿç¸¾å–å¾—çŠ¶æ…‹"""
    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)
    achievement = models.ForeignKey(Achievement, on_delete=models.CASCADE)
    unlocked_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        db_table = 'user_achievements'
        unique_together = [['user', 'achievement']]
```

---

### ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ§‹é€ 

```
virtutune/
â”œâ”€â”€ config/                 # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â”œâ”€â”€ asgi.py            # ASGIè¨­å®šï¼ˆWebSocketç”¨ï¼‰
â”‚   â””â”€â”€ wsgi.py
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ core/              # ã‚³ã‚¢ã‚¢ãƒ—ãƒª
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ views.py
â”‚   â”‚   â”œâ”€â”€ urls.py
â”‚   â”‚   â””â”€â”€ templates/
â”‚   â”‚       â””â”€â”€ core/
â”‚   â”‚           â””â”€â”€ base.html
â”‚   â”œâ”€â”€ guitar/            # ä»®æƒ³ã‚®ã‚¿ãƒ¼ã‚¢ãƒ—ãƒª
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ views.py
â”‚   â”‚   â”œâ”€â”€ urls.py
â”‚   â”‚   â””â”€â”€ templates/
â”‚   â”‚       â””â”€â”€ guitar/
â”‚   â”‚           â””â”€â”€ guitar.html
â”‚   â”œâ”€â”€ progress/          # é€²æ—ç®¡ç†ã‚¢ãƒ—ãƒª
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ views.py
â”‚   â”‚   â”œâ”€â”€ services.py
â”‚   â”‚   â”œâ”€â”€ urls.py
â”‚   â”‚   â””â”€â”€ templates/
â”‚   â”‚       â””â”€â”€ progress/
â”‚   â”‚           â””â”€â”€ progress.html
â”‚   â”œâ”€â”€ users/             # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒ—ãƒª
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ forms.py
â”‚   â”‚   â”œâ”€â”€ views.py
â”‚   â”‚   â”œâ”€â”€ urls.py
â”‚   â”‚   â””â”€â”€ templates/
â”‚   â”‚       â””â”€â”€ users/
â”‚   â”‚           â”œâ”€â”€ login.html
â”‚   â”‚           â”œâ”€â”€ signup.html
â”‚   â”‚           â””â”€â”€ profile.html
â”‚   â”œâ”€â”€ game/              # ã‚²ãƒ¼ãƒ ã‚¢ãƒ—ãƒª
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ views.py
â”‚   â”‚   â”œâ”€â”€ services.py
â”‚   â”‚   â”œâ”€â”€ urls.py
â”‚   â”‚   â””â”€â”€ templates/
â”‚   â”‚       â””â”€â”€ game/
â”‚   â”‚           â”œâ”€â”€ game.html
â”‚   â”‚           â””â”€â”€ result.html
â”‚   â”œâ”€â”€ ranking/           # ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚¢ãƒ—ãƒª
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ views.py
â”‚   â”‚   â”œâ”€â”€ services.py
â”‚   â”‚   â””â”€â”€ urls.py
â”‚   â”œâ”€â”€ mobile/            # ãƒ¢ãƒã‚¤ãƒ«API
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ views.py
â”‚   â”‚   â””â”€â”€ urls.py
â”‚   â””â”€â”€ websocket/         # WebSocketã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ consumers.py
â”‚       â”œâ”€â”€ routing.py
â”‚       â””â”€â”€ middleware.py
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ styles.css
â”‚   â”‚   â”œâ”€â”€ guitar.css
â”‚   â”‚   â””â”€â”€ game.css
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ guitar.js
â”‚   â”‚   â”œâ”€â”€ progress.js
â”‚   â”‚   â”œâ”€â”€ chart.js
â”‚   â”‚   â”œâ”€â”€ camera.js      # MediaPipeã‚«ãƒ¡ãƒ©å‡¦ç†
â”‚   â”‚   â”œâ”€â”€ websocket.js   # WebSocketé€šä¿¡
â”‚   â”‚   â””â”€â”€ game.js        # ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ sounds/
â”‚   â”‚   â””â”€â”€ strings/       # å„å¼¦ã®éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚       â”œâ”€â”€ string_1.mp3
â”‚   â”‚       â”œâ”€â”€ string_2.mp3
â”‚   â”‚       â””â”€â”€ ...
â”‚   â””â”€â”€ images/
â”‚       â””â”€â”€ achievements/  # å®Ÿç¸¾ãƒãƒƒã‚¸ç”»åƒ
â”œâ”€â”€ media/
â”‚   â””â”€â”€ songs/             # æ¥½æ›²ãƒ‡ãƒ¼ã‚¿ï¼ˆå°†æ¥çš„ï¼‰
â”œâ”€â”€ templates/
â”œâ”€â”€ manage.py
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

---

## ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆPythonï¼‰

#### requirements.txt

```txt
# =====================================================
# VirtuTune - Python Dependencies
# =====================================================

# ----- Django Framework -----
Django>=5.0,<6.0
django-environ>=1.0          # ç’°å¢ƒå¤‰æ•°ç®¡ç†

# ----- Django Extensions -----
django-extensions>=3.2       # Djangoæ‹¡å¼µã‚³ãƒãƒ³ãƒ‰
django-ratelimit>=4.1        # ãƒ¬ãƒ¼ãƒˆåˆ¶é™

# ----- WebSocket (Real-time Communication) -----
channels>=4.0                # Django Channels (WebSocket)
channels-redis>=4.2          # Redisãƒãƒ£ãƒãƒ«ãƒ¬ã‚¤ãƒ¤ãƒ¼
redis>=5.0                   # Redisã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

# ----- Task Queue (Reminders) -----
celery>=5.3                  # éåŒæœŸã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼
django-celery-beat>=2.5      # Celeryå®šæœŸå®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©

# ----- Database -----
psycopg2-binary>=2.9         # PostgreSQLã‚¢ãƒ€ãƒ—ã‚¿ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰

# ----- Utilities -----
qrcode>=7.4                  # QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
Pillow>=10.0                 # ç”»åƒå‡¦ç†

# ----- Development & Testing -----
pytest>=7.4
pytest-django>=4.5
pytest-cov>=4.1
coverage>=7.3
black>=23.0                  # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
flake8>=6.0                  # ãƒªãƒ³ã‚¿ãƒ¼
mypy>=1.6                    # å‹ãƒã‚§ãƒƒã‚¯

# ----- Documentation -----
sphinx>=7.1                  # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
sphinx-rtd-theme>=1.3        # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ†ãƒ¼ãƒ
```

#### ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç”¨é€”ä¸€è¦§

| ãƒ©ã‚¤ãƒ–ãƒ©ãƒª | ç”¨é€” | å¿…é ˆ |
|-----------|------|------|
| Django | Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | âœ… |
| django-ratelimit | APIãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰ | âœ… |
| channels | WebSocketé€šä¿¡ï¼ˆã‚¹ãƒãƒ›-PCé€£æºï¼‰ | âœ… |
| channels-redis | Redisãƒãƒ£ãƒãƒ«ãƒ¬ã‚¤ãƒ¤ãƒ¼ | âœ… |
| redis | Redisã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ | âœ… |
| celery | éåŒæœŸã‚¿ã‚¹ã‚¯ï¼ˆãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡ï¼‰ | âœ… |
| django-celery-beat | å®šæœŸå®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ© | âœ… |
| qrcode | QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆãƒ‡ãƒã‚¤ã‚¹ãƒšã‚¢ãƒªãƒ³ã‚°ï¼‰ | âœ… |
| psycopg2-binary | PostgreSQLæ¥ç¶šï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰ | âœ… |
| Pillow | ç”»åƒå‡¦ç†ï¼ˆå®Ÿç¸¾ã‚¢ã‚¤ã‚³ãƒ³ç­‰ï¼‰ | âœ… |
| django-extensions | é–‹ç™ºæ”¯æ´ãƒ„ãƒ¼ãƒ« | âšªï¸ |
| pytest | ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | âšªï¸ |
| black | ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ | âšªï¸ |
| flake8 | ãƒªãƒ³ã‚¿ãƒ¼ | âšªï¸ |

---

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆJavaScript/CDNï¼‰

#### HTMLå†…ã§èª­ã¿è¾¼ã‚€ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

```html
<!-- Chart.js - ã‚°ãƒ©ãƒ•æç”» -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4/dist/chart.umd.min.js"></script>

<!-- MediaPipe - ã‚«ãƒ¡ãƒ©ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼èªè­˜ -->
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç”¨é€”

| ãƒ©ã‚¤ãƒ–ãƒ©ãƒª | ç”¨é€” | å¿…é ˆ |
|-----------|------|------|
| Chart.js | é€²æ—ã‚°ãƒ©ãƒ•æç”» | âœ… |
| MediaPipe Camera Utils | ã‚«ãƒ¡ãƒ©ã‚¢ã‚¯ã‚»ã‚¹ | âœ… |
| MediaPipe Hands | æ‰‹æ¤œå‡ºãƒ»ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼èªè­˜ | âœ… |
| MediaPipe Drawing Utils | æ‰‹ã®éª¨æ ¼æç”»ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰ | âšªï¸ |

**æ³¨æ„**: MediaPipeã¯CDNã‹ã‚‰èª­ã¿è¾¼ã¿ã€ã‚µãƒ¼ãƒãƒ¼ã«ã¯ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã›ã‚“ã€‚

---

### é–‹ç™ºãƒ„ãƒ¼ãƒ«

#### ã‚³ãƒ¼ãƒ‰å“è³ªãƒ„ãƒ¼ãƒ«

```txt
# black - ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
[tool.black]
line-length = 88
target-version = ['py311']

# flake8 - ãƒªãƒ³ã‚¿ãƒ¼
[flake8]
max-line-length = 88
exclude = .git,__pycache__,migrations
extend-ignore = E203,W503

# mypy - å‹ãƒã‚§ãƒƒã‚¯
[mypy]
python_version = 3.11
plugins = mypy_django_plugin.main
```

---

## è¨­å®š

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š

```python
# config/settings.py

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    # ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£
    'django_extensions',

    # ã‚¢ãƒ—ãƒª
    'apps.core',
    'apps.guitar',
    'apps.progress',
    'apps.users',
    'apps.game',        # ã‚²ãƒ¼ãƒ æ©Ÿèƒ½
    'apps.ranking',     # ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ©Ÿèƒ½
    'apps.mobile',      # ãƒ¢ãƒã‚¤ãƒ«API
]

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
DATABASES = {
    'development': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    },
    'production': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'virtutune',
        'USER': 'virtutune_user',
        'PASSWORD': os.environ.get('DB_PASSWORD'),
        'HOST': 'localhost',
        'PORT': '5432',
    }
}

# ãƒ¡ãƒ¼ãƒ«è¨­å®š
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = os.environ.get('EMAIL_HOST', 'localhost')
EMAIL_PORT = int(os.environ.get('EMAIL_PORT', 587))
EMAIL_USE_TLS = True
EMAIL_HOST_USER = os.environ.get('EMAIL_HOST_USER')
EMAIL_HOST_PASSWORD = os.environ.get('EMAIL_HOST_PASSWORD')

# Celeryè¨­å®š
CELERY_BROKER_URL = os.environ.get('CELERY_BROKER_URL', 'redis://localhost:6379/0')
CELERY_RESULT_BACKEND = os.environ.get('CELERY_RESULT_BACKEND', 'redis://localhost:6379/0')

# é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
STATIC_URL = '/static/'
STATIC_ROOT = BASE_DIR / 'staticfiles'
STATICFILES_DIRS = [BASE_DIR / 'static']
```

---

## å¤–éƒ¨çµ±åˆ

### ãƒ¡ãƒ¼ãƒ«ã‚µãƒ¼ãƒ“ã‚¹
- **ç›®çš„**: ç·´ç¿’ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡
- **ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: Django Email Backend
- **èªè¨¼**: SMTP
- **ãƒ™ãƒ¼ã‚¹URL**: è¨­å®šä¾å­˜

#### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æˆ¦ç•¥
1. **ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯**: æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ã§æœ€å¤§3å›ãƒªãƒˆãƒ©ã‚¤
2. **ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼**: 5å›é€£ç¶šå¤±æ•—å¾Œã«ã‚¢ãƒ©ãƒ¼ãƒˆ
3. **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: ãƒ­ã‚°ã«è¨˜éŒ²ã—ã¦ç¶šè¡Œ
4. **ãƒ­ã‚®ãƒ³ã‚°**: ã™ã¹ã¦ã®é€ä¿¡çµæœã‚’è¨˜éŒ²

---

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼ã‚«ãƒ†ã‚´ãƒª

1. **æ¤œè¨¼ã‚¨ãƒ©ãƒ¼**: ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
2. **ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼**: ç·´ç¿’æ™‚é–“ã®çŸ›ç›¾ã€ã‚¹ãƒˆãƒªãƒ¼ã‚¯è¨ˆç®—ã‚¨ãƒ©ãƒ¼
3. **ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼ã€ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚¨ãƒ©ãƒ¼

### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼

```python
class ErrorResponse:
    code: str
    message: str
    details: Optional[dict]
    timestamp: datetime

# ä¾‹
{
    "code": "VALIDATION_ERROR",
    "message": "ç›®æ¨™æ™‚é–“ã¯1åˆ†ä»¥ä¸Š1440åˆ†ä»¥ä¸‹ã§è¨­å®šã—ã¦ãã ã•ã„",
    "details": {"field": "daily_goal_minutes", "min": 1, "max": 1440},
    "timestamp": "2026-01-27T12:00:00Z"
}
```

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### èªè¨¼æˆ¦ç•¥
- Django Authentication Systemä½¿ç”¨
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹èªè¨¼
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯PBKDF2 + SHA256ã§ãƒãƒƒã‚·ãƒ¥åŒ–
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã‚‹ã¨ç„¡åŠ¹

### èªå¯ãƒ¢ãƒ‡ãƒ«
- ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ä¿è­·ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹å¯
- @login_requiredãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ä½¿ç”¨

### ãƒ‡ãƒ¼ã‚¿ä¿è­·
- HTTPSå¿…é ˆï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
- CSRFãƒˆãƒ¼ã‚¯ãƒ³å¿…é ˆ
- SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ï¼ˆORMä½¿ç”¨ï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰æ©Ÿå¯†æƒ…å ±ã‚’é™¤å¤–

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

```python
# config/settings.py - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£è¨­å®š

# ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨­å®š
SESSION_EXPIRE_AT_BROWSER_CLOSE = True  # ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã‚‹ã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ç„¡åŠ¹
SESSION_COOKIE_SECURE = True  # HTTPSã®ã¿ã‚¯ãƒƒã‚­ãƒ¼é€ä¿¡ï¼ˆæœ¬ç•ªï¼‰
SESSION_COOKIE_HTTPONLY = True  # JavaScriptã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯
SESSION_COOKIE_SAMESITE = 'Lax'  # CSRFå¯¾ç­–

# CSRFè¨­å®š
CSRF_COOKIE_SECURE = True  # HTTPSã®ã¿ï¼ˆæœ¬ç•ªï¼‰
CSRF_COOKIE_HTTPONLY = True
CSRF_COOKIE_SAMESITE = 'Lax'

# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ
PASSWORD_RESET_TIMEOUT = 3600  # 1æ™‚é–“ï¼ˆç§’ï¼‰

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
SECURE_HSTS_SECONDS = 31536000  # 1å¹´
SECURE_HSTS_INCLUDE_SUBDOMAINS = True
SECURE_HSTS_PRELOAD = True
SECURE_SSL_REDIRECT = True  # HTTPâ†’HTTPSãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
SECURE_BROWSER_XSS_FILTER = True
SECURE_CONTENT_TYPE_NOSNIFF = True
X_FRAME_OPTIONS = 'DENY'

# ç’°å¢ƒå¤‰æ•°ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
def get_env_var(var_name: str, required=False) -> str | None:
    from os import environ
    from django.core.exceptions import ImproperlyConfigured
    value = environ.get(var_name)
    if required and not value:
        raise ImproperlyConfigured(f'{var_name} is required but not set')
    return value

SECRET_KEY = get_env_var('SECRET_KEY', required=True)
```

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™

```python
# requirements.txt ã«è¿½åŠ 
django-ratelimit

# ä½¿ç”¨ä¾‹
from django_ratelimit.decorators import ratelimit

@ratelimit(key='ip', rate='5/m', method='POST')
def login_view(request):
    # å®Ÿè£…
```

- ãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œ: 1åˆ†é–“ã«5å›ã¾ã§
- APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ: 1åˆ†é–“ã«60å›ã¾ã§
- ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—: 1æ™‚é–“ã«3å›ã¾ã§ï¼ˆåŒä¸€IPï¼‰

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …

### äºˆæƒ³è² è·
- åˆæœŸ: 100åŒæ™‚æ¥ç¶šãƒ¦ãƒ¼ã‚¶ãƒ¼
- å°†æ¥: 1000ä»¥ä¸Š

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
- é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã¯ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥
- é€²æ—é›†è¨ˆãƒ‡ãƒ¼ã‚¿ã¯1åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: user_id, started_at
- select_related/prefetch_relatedä½¿ç”¨
- ãƒãƒ«ã‚¯ã‚¤ãƒ³ã‚µãƒ¼ãƒˆã§ã‚»ãƒ¼ãƒ–æœ€é©åŒ–

---

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### å˜ä½“ãƒ†ã‚¹ãƒˆ
- ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™: 80%
- é‡ç‚¹é ˜åŸŸ: ã‚µãƒ¼ãƒ“ã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒ‡ãƒ¼ã‚¿å¤‰æ›
- ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯: pytest + pytest-django

### çµ±åˆãƒ†ã‚¹ãƒˆ
- ãƒ“ãƒ¥ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œã®ãƒ†ã‚¹ãƒˆ
- èªè¨¼ãƒ•ãƒ­ãƒ¼ã®ãƒ†ã‚¹ãƒˆ

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- ä»®æƒ³ã‚®ã‚¿ãƒ¼æ“ä½œã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ 
- é€²æ—ã‚°ãƒ©ãƒ•ã®æç”»æ™‚é–“

---

## WebSocketæŠ€è¡“ä»•æ§˜

### ãƒ—ãƒ­ãƒˆã‚³ãƒ«ä»•æ§˜

**æ¥ç¶šã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `ws://localhost:8000/ws/guitar/{session_id}/`

**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**:
```json
{
  "type": "chord_change",
  "data": {
    "chord": "C",
    "timestamp": 1706347200
  }
}
```

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—

| ã‚¿ã‚¤ãƒ— | æ–¹å‘ | èª¬æ˜ |
|--------|------|------|
| `chord_change` | ã‚¹ãƒãƒ›â†’PC | ã‚³ãƒ¼ãƒ‰å¤‰æ›´é€šçŸ¥ |
| `connect` | PCâ†’ã‚¹ãƒãƒ› | æ¥ç¶šç¢ºç«‹é€šçŸ¥ |
| `disconnect` | åŒæ–¹å‘ | åˆ‡æ–­é€šçŸ¥ |
| `ping` | åŒæ–¹å‘ | æ¥ç¶šç¶­æŒç”¨ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆ |
| `session_start` | PCâ†’ã‚¹ãƒãƒ› | æ¼”å¥ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ |
| `session_end` | PCâ†’ã‚¹ãƒãƒ› | æ¼”å¥ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº† |

### Django Channelsè¨­å®š

```python
# config/settings.py
ASGI_APPLICATION = 'config.asgi.application'

CHANNEL_LAYERS = {
    'default': {
        'BACKEND': 'channels_redis.core.RedisChannelLayer',
        'CONFIG': {
            'hosts': [os.environ.get('REDIS_URL', 'redis://localhost:6379/0')],
        },
    },
}

INSTALLED_APPS += [
    'channels',
    'apps.websocket',
]
```

### ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼å®Ÿè£…

```python
# apps/websocket/consumers.py
import json
from channels.generic.websocket import AsyncWebsocketConsumer

class GuitarConsumer(AsyncWebsocketConsumer):
    async def connect(self):
        self.session_id = self.scope['url_route']['kwargs']['session_id']
        self.room_group_name = f'guitar_{self.session_id}'

        await self.channel_layer.group_add(
            self.room_group_name,
            self.channel_name
        )
        await self.accept()

    async def receive(self, text_data):
        text_data_json = json.loads(text_data)
        message_type = text_data_json.get('type')

        if message_type == 'chord_change':
            chord = text_data_json['data']['chord']
            await self.channel_layer.group_send(
                self.room_group_name,
                {
                    'type': 'chord_change',
                    'chord': chord,
                }
            )

    async def chord_change(self, event):
        await self.send(text_data=json.dumps({
            'type': 'chord_change',
            'data': {'chord': event['chord']}
        }))
```

### ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

```python
# apps/websocket/routing.py
from django.urls import re_path
from . import consumers

websocket_urlpatterns = [
    re_path(r'ws/guitar/(?P<session_id>[^/]+)/$', consumers.GuitarConsumer.as_asgi()),
]
```

---

## MediaPipeçµ±åˆè©³ç´°

### æŠ€è¡“ä»•æ§˜

**ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: MediaPipe Hands (JavaScript)
**è§£åƒåº¦**: 640x480
**æ¤œå‡ºé…å»¶ç›®æ¨™**: 100msä»¥å†…
**æ¤œå‡ºæ‰‹**: ä¸¡æ‰‹å¯¾å¿œï¼ˆæœ€å¤§2æ‰‹ï¼‰

### å®Ÿè£…ãƒ•ãƒ­ãƒ¼

```javascript
// static/js/camera.js
import { Hands } from '@mediapipe/hands';
import { Camera } from '@mediapipe/camera_utils';

class GestureRecognizer {
    constructor() {
        this.hands = new Hands({
            locateFile: (file) => {
                return `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`;
            }
        });

        this.hands.setOptions({
            maxNumHands: 1,
            modelComplexity: 1,
            minDetectionConfidence: 0.7,
            minTrackingConfidence: 0.7
        });

        this.hands.onResults(this.onResults.bind(this));
        this.prevLandmarks = null;
    }

    async startCamera(videoElement) {
        const camera = new Camera(videoElement, {
            onFrame: async () => {
                await this.hands.send({ image: videoElement });
            },
            width: 640,
            height: 480
        });
        await camera.start();
    }

    onResults(results) {
        if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {
            const landmarks = results.multiHandLandmarks[0];

            if (this.isStrumming(landmarks, this.prevLandmarks)) {
                const velocity = this.strumVelocity(landmarks);
                this.triggerNote(velocity);
            }

            this.prevLandmarks = landmarks;
        }
    }

    isStrumming(current, previous) {
        if (!previous) return false;

        // æ‰‹é¦–ï¼ˆlandmark 0ï¼‰ã®Yåº§æ¨™ã®å¤‰åŒ–ã‚’æ¤œçŸ¥
        const currentY = current[0].y;
        const previousY = previous[0].y;
        const velocity = currentY - previousY;

        // ä¸‹æ–¹å‘ã¸ã®å‹•ãã§ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ã¨åˆ¤å®š
        return velocity > 0.05; // é–¾å€¤ã¯èª¿æ•´å¯èƒ½
    }

    strumVelocity(landmarks) {
        // æ‰‹é¦–ã®ä¸­æŒ‡ã®å…ˆã¾ã§ã®è·é›¢ã§Velocityã‚’è¨ˆç®—
        const wrist = landmarks[0];
        const middleTip = landmarks[12];
        return Math.sqrt(
            Math.pow(wrist.x - middleTip.x, 2) +
            Math.pow(wrist.y - middleTip.y, 2)
        );
    }

    triggerNote(velocity) {
        // éŸ³å£°å†ç”Ÿã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
        window.dispatchEvent(new CustomEvent('strum', { detail: { velocity } }));
    }
}
```

### ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼é…æ…®

- ã‚«ãƒ¡ãƒ©æ˜ åƒã¯å‡¦ç†å¾Œã«å³åº§ã«ç ´æ£„
- ç”»åƒãƒ‡ãƒ¼ã‚¿ã®ã‚µãƒ¼ãƒãƒ¼é€ä¿¡ã¯è¡Œã‚ãªã„
- LEDãŒç‚¹ç¯ä¸­ã§ã‚ã‚‹ã“ã¨ã‚’æ˜ç¤º
- å‡¦ç†ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®ã¿ã§å®Œçµ

---

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph LR
    Nginx[Nginx] --> Gunicorn[Gunicorn]
    Gunicorn --> Django[Django]
    Django --> DB[(PostgreSQL)]
    Django --> Redis[(Redis)]

    Celery[Celery Worker] --> Redis
    Celery --> Django

    Nginx --> Static[é™çš„ãƒ•ã‚¡ã‚¤ãƒ«]
```

---

## è¨­è¨ˆæ±ºå®šãƒ­ã‚°

| æ—¥ä»˜ | æ±ºå®š | æ ¹æ‹  | å½±éŸ¿ |
|------|------|------|------|
| 2026-01-27 | Djangoã‚’æ¡ç”¨ | ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯æ©Ÿèƒ½ã€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã€ORMãŒå«ã¾ã‚Œã‚‹ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯HTML/CSS/JS |
| 2026-01-27 | SQLiteã‹ã‚‰PostgreSQLã¸ã®ç§»è¡Œã‚’è¦‹è¶Šã—ãŸè¨­è¨ˆ | é–‹ç™¼ã¯ç°¡æ˜“DBã€æœ¬ç•ªã¯ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªDB | ORMä½¿ç”¨ã§æŠ½è±¡åŒ– |
| 2026-01-27 | Celeryã§ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼å®Ÿè£… | å®šæœŸå®Ÿè¡Œã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ | Redisä¾å­˜ |
| 2026-01-27 | éŸ³å£°ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§å†ç”Ÿ | ã‚µãƒ¼ãƒãƒ¼è² è·è»½æ¸›ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‘ä¸Š | éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ä¿¡ |
| 2026-01-27 | ERå›³ã¨è©³ç´°ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆã‚’è¿½åŠ  | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ã®æ˜ç¢ºåŒ– | 4ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆï¼ˆusers, practice_sessions, chords, user_chordsï¼‰ |
| 2026-01-27 | user_chordsãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¿½åŠ  | å°†æ¥ã®ç¿’ç†Ÿåº¦è¿½è·¡æ©Ÿèƒ½ã«å‚™ãˆã‚‹ | MVPã§ã¯æœªä½¿ç”¨ |
| 2026-01-27 | JSONBå‹ã§ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ | æŸ”è»Ÿãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ã®é€£æºå®¹æ˜“ | finger_positions, chords_practiced |
| 2026-01-27 | ã‚¹ãƒãƒ›+PCã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ‡ãƒã‚¤ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ | ãƒªã‚¢ãƒ«ãªã‚®ã‚¿ãƒ¼ä½“é¨“ï¼ˆå·¦æ‰‹ã‚³ãƒ¼ãƒ‰é¸æŠã€å³æ‰‹ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ï¼‰ | WebSocketå®Ÿè£…ã€QRã‚³ãƒ¼ãƒ‰ãƒšã‚¢ãƒªãƒ³ã‚° |
| 2026-01-27 | MediaPipe Handsã‚’ã‚«ãƒ¡ãƒ©ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼èªè­˜ã«æ¡ç”¨ | é«˜ç²¾åº¦ã‹ã¤è»½é‡ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§å‹•ä½œ | JavaScriptå®Ÿè£…ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼é…æ…®ã§å³æ™‚ç ´æ£„ |
| 2026-01-27 | QRã‚³ãƒ¼ãƒ‰æ–¹å¼ã§ãƒ‡ãƒã‚¤ã‚¹ãƒšã‚¢ãƒªãƒ³ã‚° | Web Bluetoothã¯iOSå¯¾å¿œãŒä¸å®Œå…¨ | QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| 2026-01-27 | Django Channelsã§WebSocketå®Ÿè£… | Djangoã¨çµ±åˆã•ã‚ŒãŸWebSocketã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ | ASGIã‚µãƒ¼ãƒãƒ¼ï¼ˆDaphneï¼‰å¿…è¦ |
| 2026-01-27 | ãƒªã‚ºãƒ ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ã¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’å®Ÿè£… | ã‚²ãƒ¼ãƒ æ„Ÿè¦šã§å­¦ã¹ã‚‹ç’°å¢ƒã€ç¤¾ä¼šçš„ãªãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ | 7ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆã€ã‚²ãƒ¼ãƒ é–¢é€£ã‚¢ãƒ—ãƒª |
| 2026-01-27 | éŸ³ç¬¦ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’JSONã§ä¿å­˜ | æŸ”è»Ÿãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã€å°†æ¥çš„ãªè­œé¢è¿½åŠ å®¹æ˜“ | songs.notesãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ |
| 2026-01-27 | **ãƒšãƒ«ã‚½ãƒŠãƒ™ãƒ¼ã‚¹è¨­è¨ˆã®æ¡ç”¨** | **å„ãƒšãƒ«ã‚½ãƒŠã®ç•°ãªã‚‹èª²é¡Œã¨ãƒ‹ãƒ¼ã‚ºã«å¯¾å¿œã™ã‚‹ãŸã‚** | **å„æ©Ÿèƒ½ã®å„ªå…ˆåº¦ã¨è¨­è¨ˆæ–¹é‡ã‚’æ±ºå®š** |
| 2026-01-27 | **ãƒšãƒ«ã‚½ãƒŠ2ï¼ˆæŒ«æŠ˜çµŒé¨“è€…ï¼‰ã«ã‚¹ãƒãƒ›å·¦æ‰‹æ“ä½œã‚’æä¾›** | **Fã‚³ãƒ¼ãƒ‰ç­‰ã®æŒ«æŠ˜è¦å› ã‚’å›é¿ã€å·¦æ‰‹ã®ç—›ã¿ã‚’è§£æ¶ˆ** | **è¦ä»¶9, 10ã§ã‚¿ãƒƒãƒå…¥åŠ›ã‚’æ¡ç”¨** |
| 2026-01-27 | **ãƒšãƒ«ã‚½ãƒŠ3ï¼ˆç¶™ç¶šã—ãŸã„ï¼‰ã«é€²æ—å¯è¦–åŒ–ã‚’å¼·åŒ–** | **æˆé•·ã®å®Ÿæ„ŸãŒç¿’æ…£åŒ–ã®éµ** | **è¦ä»¶3, 4ã§ã‚°ãƒ©ãƒ•ã€ç›®æ¨™é”æˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å®Ÿè£…** |

---

## å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

1. **ãƒ•ã‚§ãƒ¼ã‚º1 (MVP)**:
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼
   - ä»®æƒ³ã‚®ã‚¿ãƒ¼åŸºæœ¬æ©Ÿèƒ½
   - ç·´ç¿’è¨˜éŒ²ã¨é€²æ—è¡¨ç¤º

2. **ãƒ•ã‚§ãƒ¼ã‚º2**:
   - ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½
   - ã‚°ãƒ©ãƒ•æ©Ÿèƒ½å¼·åŒ–
   - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç†

3. **ãƒ•ã‚§ãƒ¼ã‚º3**:
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
   - æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤

---

## æœªè§£æ±ºã®è³ªå•

- [x] éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ â†’ Freesound.org CC0ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã‚’ä½¿ç”¨
- [x] æœ¬ç•ªç’°å¢ƒã®ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°å…ˆ â†’ Renderã‚’æ¡ç”¨
- [ ] ãƒ‰ãƒ¡ã‚¤ãƒ³å
- [x] åˆæœŸã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®é›£æ˜“åº¦åŸºæº– â†’ ã™ã¹ã¦é›£æ˜“åº¦1ï¼ˆåˆå¿ƒè€…å‘ã‘ï¼‰
- [ ] åˆæœŸæ¥½æ›²ãƒ‡ãƒ¼ã‚¿ã®å…·ä½“çš„ãªè­œé¢è¨­è¨ˆ
