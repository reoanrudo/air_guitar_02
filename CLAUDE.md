# Claude Code ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã‚ãªãŸã¯ã€VirtuTuneãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹ç™ºã‚’æ‹…å½“ã™ã‚‹è‡ªå¾‹å‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã™ã€‚

## ç©¶æ¥µã®ç›®æ¨™

requirements.mdã€design.mdã€task.md ã«åŸºã¥ã„ã¦ã€Djangoãƒ™ãƒ¼ã‚¹ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ŒVirtuTuneã€ã‚’é–‹ç™ºã—ã€ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã‚’ä»•æ§˜é€šã‚Šã«å®Œäº†ã•ã›ã‚‹ã“ã¨ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**VirtuTune** ã¯ã€ã‚®ã‚¿ãƒ¼åˆå¿ƒè€…ãŒä»¥ä¸‹ã®èª²é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ï¼š

- æ¥½å™¨ã‚’è²·ã‚ãšã«ã‚®ã‚¿ãƒ¼ä½“é¨“ãŒã§ãã‚‹ï¼ˆä»®æƒ³ã‚®ã‚¿ãƒ¼ï¼‰
- ç·´ç¿’æ™‚é–“ã‚’è¨˜éŒ²ã—ã€é€²æ—ã‚’å¯è¦–åŒ–ã§ãã‚‹
- ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¶­æŒã§ãã‚‹ï¼ˆãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã€ç›®è¨­å®šï¼‰

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ |
|----------|------|
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | Python 3.11+, Django 5.0+ |
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | HTML5, CSS3, JavaScript (ES6+) |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | SQLiteï¼ˆé–‹ç™ºï¼‰/ PostgreSQLï¼ˆæœ¬ç•ªï¼‰ |
| ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ | Celery + Redis |
| ãƒ‡ãƒ—ãƒ­ã‚¤ | Gunicorn + Nginx |

---

## ã‚³ã‚¢å®Ÿè¡Œãƒ«ãƒ¼ãƒ—

ã‚ãªãŸã¯ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ—ã‚’è‡ªå¾‹çš„ã«å®Ÿè¡Œã—ã¾ã™ï¼š

### 1. è¦³å¯Ÿï¼ˆObserve / çŠ¶æ³æŠŠæ¡ï¼‰

- **task.md ã‚’ã‚¹ã‚­ãƒ£ãƒ³**ã—ã€ğŸ”´ï¼ˆæœªå®Ÿè£…ï¼‰ã¨ãƒãƒ¼ã‚¯ã•ã‚ŒãŸæœ€é«˜å„ªå…ˆåº¦ã®ã‚¿ã‚¹ã‚¯ã‚’ç‰¹å®šã™ã‚‹
- å®Ÿè¡Œå¯èƒ½ãªã‚¿ã‚¹ã‚¯ãŒæ®‹ã£ã¦ã„ãªã„å ´åˆã¯ã€ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†ã™ã‚‹
- ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ âš ï¸ ã‚’ç¢ºèªã—ã€ãƒ–ãƒ­ãƒƒã‚«ãƒ¼ãŒè§£æ±ºã•ã‚ŒãŸã‹è©•ä¾¡ã™ã‚‹

### 2. è¨­è¨ˆç¢ºèªï¼ˆDesign Checkï¼‰

- é¸æŠã—ãŸã‚¿ã‚¹ã‚¯ãŒ **design.md** ã®ä»•æ§˜ã¨æ•´åˆã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹
- ã™ã¹ã¦ã®ä¾å­˜é–¢ä¿‚ãŒæº€ãŸã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹
- å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒç¢ºç«‹ã•ã‚ŒãŸã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«å¾“ã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹
- ä¸ä¸€è‡´ãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã¯ã€è¨­è¨ˆç«¶åˆè§£æ±ºã«é€²ã‚€

### 3. è¨ˆç”»ï¼ˆPlan / è¨ˆç”»ç«‹æ¡ˆï¼‰

- é¸æŠã—ãŸã‚¿ã‚¹ã‚¯ã‚’å…·ä½“çš„ãªãƒã‚¤ã‚¯ãƒ­ã‚¹ãƒ†ãƒƒãƒ—ã«åˆ†è§£ã™ã‚‹
- **TDDæ–¹æ³•è«–**ã‚’é©ç”¨ï¼šRed â†’ Green â†’ è¨­è¨ˆç¢ºèª â†’ Refactor
- è¨ˆç”»ãŒè¨­è¨ˆæ€æƒ³ã¨å®Œå…¨ã«ä¸€è‡´ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹

### 4. å®Ÿè¡Œï¼ˆActï¼‰- TDDå®Ÿè£…

å³æ ¼ãªãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã«å¾“ã†ï¼š

#### 4.1 Redãƒ•ã‚§ãƒ¼ã‚º
- æœ€åˆã«å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
- ãƒ†ã‚¹ãƒˆãŒæ­£ã—ã„ç†ç”±ã§å¤±æ•—ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹
- ãƒ†ã‚¹ãƒˆèª¬æ˜ã«æœŸå¾…ã•ã‚Œã‚‹æŒ¯ã‚‹èˆã„ã‚’æ–‡æ›¸åŒ–ã™ã‚‹

#### 4.2 Greenãƒ•ã‚§ãƒ¼ã‚º
- ãƒ†ã‚¹ãƒˆã‚’æˆåŠŸã•ã›ã‚‹æœ€å°é™ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
- ãƒ†ã‚¹ãƒˆã‚’ç·‘ã«ã™ã‚‹ã“ã¨ã ã‘ã«é›†ä¸­ã™ã‚‹
- ã“ã®æ®µéšã§ã®éåº¦ãªè¨­è¨ˆã‚’é¿ã‘ã‚‹

#### 4.3 è¨­è¨ˆç¢ºèªãƒ•ã‚§ãƒ¼ã‚º
- å®Ÿè£…ãŒ **design.md** ã¨æ•´åˆã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹
- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£é•åãŒãªã„ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹
- æ„å›³ã—ãªã„å‰¯ä½œç”¨ãŒãªã„ã“ã¨ã‚’ç¢ºèªã™ã‚‹

#### 4.4 Refactorãƒ•ã‚§ãƒ¼ã‚º
- ãƒ†ã‚¹ãƒˆã‚’ç·‘ã«ä¿ã¡ãªãŒã‚‰ã‚³ãƒ¼ãƒ‰å“è³ªã‚’æ”¹å–„ã™ã‚‹
- **PEP 8** æº–æ‹ 
- SOLIDåŸå‰‡ã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚³ãƒ¼ãƒ‰ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’é©ç”¨ã™ã‚‹
- å¿…è¦ã«å¿œã˜ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°ã™ã‚‹

### 5. è¨­è¨ˆåŒæœŸï¼ˆDesign Syncï¼‰

å®Ÿè£…ã«ã‚ˆã‚Šè¨­è¨ˆã®ã‚®ãƒ£ãƒƒãƒ—ã‚„æ”¹å–„ç‚¹ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸå ´åˆï¼š

#### è¨­è¨ˆç«¶åˆè§£æ±ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

1. **ç«¶åˆã‚’è©•ä¾¡ã™ã‚‹**ï¼š
   - ã“ã‚Œã¯è¨­è¨ˆã®è©³ç´°ä¸è¶³ã‹ï¼Ÿ
   - ã“ã‚Œã¯è¨­è¨ˆã®æ¬ é™¥ã‹ï¼Ÿ
   - ã“ã‚Œã¯å®Ÿè£…ã®é€¸è„±ã‹ï¼Ÿ

2. **åˆ¤æ–­åŸºæº–**ï¼š
   - è¨­è¨ˆãŒä¸å®Œå…¨ãªå ´åˆ â†’ **design.md** ã‚’è©³ç´°ã§æ›´æ–°
   - è¨­è¨ˆã«æ¬ é™¥ãŒã‚ã‚‹å ´åˆ â†’ **design.md** ã‚’æ”¹å–„ã§æ›´æ–°
   - å®Ÿè£…ãŒé€¸è„±ã—ã¦ã„ã‚‹å ´åˆ â†’ è¨­è¨ˆã«åˆã‚ã›ã¦å®Ÿè£…ã‚’ä¿®æ­£

3. **æ–‡æ›¸åŒ–è¦ä»¶**ï¼š
   - **design.md** ã«å¤‰æ›´ã‚’æ–‡æ›¸åŒ–
   - å¤‰æ›´ã®æ ¹æ‹ ã‚’å«ã‚ã‚‹
   - å½±éŸ¿ã‚’å—ã‘ã‚‹ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ›´æ–°
   - è¨­è¨ˆå¤‰æ›´ãƒ­ã‚°ã«ã‚¨ãƒ³ãƒˆãƒªã‚’è¿½åŠ 

**é‡è¦**: è¨­è¨ˆæ›´æ–°ã‚’å¾Œå›ã—ã«ã—ãªã„ã€‚å³æ™‚åŒæœŸãŒå¿…é ˆã€‚

### 6. è‡ªå·±ä¿®æ­£ï¼ˆSelf-Correctï¼‰

#### ãƒ†ã‚¹ãƒˆæˆåŠŸæ™‚ï¼š
1. ã‚¿ã‚¹ã‚¯ã‚’ ğŸŸ¢ï¼ˆæœ€å°å®Ÿè£…æ¸ˆã¿ï¼‰ã«æ›´æ–°ã™ã‚‹
2. å¯èª­æ€§ã¨åŠ¹ç‡æ€§ã®ãŸã‚ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’æ¤œè¨ã™ã‚‹
3. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œã€âœ…ï¼ˆå®Œäº†ï¼‰ã«æ›´æ–°ã™ã‚‹
4. å®Ÿè£…å±¥æ­´ã«å®Ÿè£…è©³ç´°ã‚’æ–‡æ›¸åŒ–ã™ã‚‹

#### ãƒ†ã‚¹ãƒˆå¤±æ•—æ™‚ï¼š
1. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ãƒ­ã‚°ã€é–¢é€£ã‚³ãƒ¼ãƒ‰ã‚’åˆ†æã™ã‚‹
2. ãƒã‚°ã®åŸå› ã«ã¤ã„ã¦ä»®èª¬ã‚’ç«‹ã¦ã‚‹
3. ä»®èª¬ã«åŸºã¥ã„ã¦ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã€å†ãƒ†ã‚¹ãƒˆã™ã‚‹
4. 3å›ã®è©¦è¡Œå¾Œã‚‚è§£æ±ºã—ãªã„å ´åˆï¼š
   - âš ï¸ï¼ˆãƒ–ãƒ­ãƒƒã‚¯æ¸ˆã¿ï¼‰ã¨ãƒãƒ¼ã‚¯ã™ã‚‹
   - ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ä»¥ä¸‹ã‚’æ–‡æ›¸åŒ–ï¼š
     - å¤±æ•—ãƒ­ã‚°
     - è©¦ã¿ãŸè§£æ±ºç­–
     - ç–‘ã‚ã‚Œã‚‹æ ¹æœ¬åŸå› 
   - ã‚¹ãƒ†ãƒƒãƒ—1ã«æˆ»ã‚Šã€åˆ¥ã®ã‚¿ã‚¹ã‚¯ã‚’é¸æŠã™ã‚‹

---

## æŒ‡å°åŸå‰‡

- **çœŸå®Ÿã®æºæ³‰**: **requirements.md** ã¨ **design.md** ã¯çµ¶å¯¾çš„ãªã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
- **ã‚¯ãƒªãƒ¼ãƒ³ã‚³ãƒ¼ãƒ‰**: å¸¸ã«èª­ã¿ã‚„ã™ãã€ä¿å®ˆã—ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰ã‚’ç¶­æŒã™ã‚‹
- **æ®µéšçš„ãªé€²æ­©**: ã‚¿ã‚¹ã‚¯å˜ä½ã§å°ã•ãã€ç¢ºå®Ÿãªã‚³ãƒŸãƒƒãƒˆã‚’è¡Œã†
- **è¨­è¨ˆå„ªå…ˆ**: ã™ã¹ã¦ã®å®Ÿè£…ã¯è¨­è¨ˆã¨æ•´åˆã—ã€è¨­è¨ˆã‚’å¼·åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- **å³æ™‚åŒæœŸ**: è¨­è¨ˆã¨å®Ÿè£…ã¯åŒæœŸã‚’ä¿ã¤å¿…è¦ãŒã‚ã‚‹
- **ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£**: ã™ã¹ã¦ã®æ±ºå®šã¨å¤‰æ›´ã¯æ–‡æ›¸åŒ–ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹

---

## ã‚¿ã‚¹ã‚¯å®Ÿè¡Œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ã‚¿ã‚¹ã‚¯å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] ã‚¿ã‚¹ã‚¯è¦ä»¶ãŒå®Œå…¨ã«ç†è§£ã•ã‚Œã¦ã„ã‚‹
- [ ] ä¾å­˜é–¢ä¿‚ãŒç‰¹å®šã•ã‚Œã€åˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹
- [ ] è¨­è¨ˆã¨ã®æ•´åˆæ€§ãŒç¢ºèªã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªãŒè¨ˆç”»ã•ã‚Œã¦ã„ã‚‹ï¼ˆãƒãƒƒãƒ”ãƒ¼ãƒ‘ã‚¹ã€ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã€ã‚¨ãƒ©ãƒ¼ï¼‰
- [ ] æˆåŠŸåŸºæº–ãŒæ˜ç¢ºã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [ ] å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒåˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹

### ã‚¿ã‚¹ã‚¯ä¸­ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] TDDã‚µã‚¤ã‚¯ãƒ«ã«å³å¯†ã«å¾“ã£ã¦ã„ã‚‹
- [ ] è¨˜è¿°çš„ãªãƒ†ã‚¹ãƒˆåã‚’æ›¸ã„ã¦ã„ã‚‹
- [ ] ã‚³ãƒ¼ãƒ‰ãŒ **PEP 8** è¨­è¨ˆæ¨™æº–ã‚’æº€ãŸã—ã¦ã„ã‚‹
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ‡ãƒãƒƒã‚°ç”¨ã®ãƒ­ã‚°ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ãŒè€ƒæ…®ã•ã‚Œã¦ã„ã‚‹

### ã‚¿ã‚¹ã‚¯å¾Œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒåˆæ ¼ã—ã¦ã„ã‚‹
- [ ] ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒåŸºæº–ã‚’æº€ãŸã—ã¦ã„ã‚‹ï¼ˆâ‰¥80%ï¼‰
- [ ] ã‚³ãƒ¼ãƒ‰ã®å“è³ªãŒãƒ¬ãƒ“ãƒ¥ãƒ¼ã•ã‚Œã¦ã„ã‚‹ï¼ˆflake8, Blackï¼‰
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹
- [ ] è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒåŒæœŸã•ã‚Œã¦ã„ã‚‹
- [ ] **task.md** ã§ã‚¿ã‚¹ã‚¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹
- [ ] å®Ÿè£…ãƒ¡ãƒ¢ãŒå±¥æ­´ã«è¿½åŠ ã•ã‚Œã¦ã„ã‚‹

---

## é–‹ç™ºæ¨™æº–

### Pythonã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- **PEP 8** æº–æ‹ 
- **Black** ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- **flake8** ã«ã‚ˆã‚‹ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°
- **å‹ãƒ’ãƒ³ãƒˆ**ï¼ˆType Hintsï¼‰ã®ä½¿ç”¨

### ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ä¾‹

```python
# è‰¯ã„ä¾‹
from typing import Optional
from datetime import datetime

class PracticeService:
    """ç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«é–¢ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚¯ãƒ©ã‚¹"""

    def create_session(self, user: User) -> PracticeSession:
        """
        æ–°ã—ã„ç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹

        Args:
            user: ç·´ç¿’ã‚’é–‹å§‹ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼

        Returns:
            ä½œæˆã•ã‚ŒãŸç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³
        """
        session = PracticeSession.objects.create(
            user=user,
            started_at=timezone.now()
        )
        return session
```

### éåŒæœŸã‚¿ã‚¹ã‚¯ï¼ˆCeleryï¼‰

```python
from celery import shared_task

@shared_task
def send_daily_reminders():
    """ç·´ç¿’ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã™ã‚‹"""
    # å®Ÿè£…
```

---

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³

```python
# æ¨å¥¨ã•ã‚Œã‚‹ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³
from django.db import DatabaseError
import logging

logger = logging.getLogger(__name__)

def create_practice_session(user: User) -> Optional[PracticeSession]:
    """
    ç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹

    ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ãƒ­ã‚°ã‚’è¨˜éŒ²ã—ã€Noneã‚’è¿”ã™
    """
    try:
        session = PracticeSession.objects.create(
            user=user,
            started_at=timezone.now()
        )
        logger.info(f'ç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆæˆåŠŸ: user_id={user.id}, session_id={session.id}')
        return session

    except DatabaseError as e:
        logger.error(
            f'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼: user_id={user.id}',
            exc_info=True,
            extra={'user_id': user.id}
        )
        return None

    except Exception as e:
        logger.error(
            f'äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼: user_id={user.id}',
            exc_info=True,
            extra={'user_id': user.id, 'error_type': type(e).__name__}
        )
        return None
```

---

## Djangoç‰¹æœ‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³

### ãƒ“ãƒ¥ãƒ¼ã®å®Ÿè£…

```python
from django.contrib.auth.mixins import LoginRequiredMixin
from django.views.generic import TemplateView, View
from django.http import JsonResponse
from django.views.decorators.http import require_POST
from django.contrib.auth.decorators import login_required

class GuitarView(LoginRequiredMixin, TemplateView):
    """ä»®æƒ³ã‚®ã‚¿ãƒ¼ç”»é¢"""
    template_name = 'guitar/guitar.html'

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['chords'] = Chord.objects.all()
        return context

@login_required
@require_POST
def start_practice(request):
    """ç·´ç¿’é–‹å§‹API"""
    try:
        session = PracticeService.create_session(request.user)
        return JsonResponse({'session_id': session.id}, status=201)
    except Exception as e:
        return JsonResponse({'error': str(e)}, status=400)
```

### URLè¨­å®š

```python
from django.urls import path
from . import views

app_name = 'guitar'

urlpatterns = [
    path('', views.GuitarView.as_view(), name='guitar'),
    path('api/start/', views.start_practice, name='start_practice'),
    path('api/end/', views.end_practice, name='end_practice'),
]
```

---

## å®Ÿè£…å±¥æ­´

<!-- ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã£ã¦ç¶­æŒã•ã‚Œã¾ã™ -->

### å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯
- ãªã—ï¼ˆåˆæœŸçŠ¶æ…‹ï¼‰

### ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯
- ãªã—ï¼ˆåˆæœŸçŠ¶æ…‹ï¼‰

### è¨­è¨ˆå¤‰æ›´ãƒ­ã‚°
| æ—¥ä»˜ | å¤‰æ›´ | æ ¹æ‹  | å½±éŸ¿ |
|------|------|------|------|
| 2026-01-27 | åˆæœŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹å§‹ | - |

---

## æ¬¡å›ä½œæ¥­æ™‚ã®ãƒ’ãƒ³ãƒˆ

<!-- å„ä½œæ¥­ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾Œã«æ›´æ–° -->

### ç¾åœ¨ã®é€²æ—
- æœ€å¾Œã«å®Œäº†: ãªã—
- ç¾åœ¨ãƒ–ãƒ­ãƒƒã‚¯ä¸­: ãªã—
- æ¬¡ã®å„ªå…ˆäº‹é …: **ã‚¿ã‚¹ã‚¯ 1.1: Djangoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

### æ—¢çŸ¥ã®å•é¡Œ
- ãªã—ï¼ˆåˆæœŸçŠ¶æ…‹ï¼‰

### æ¨å¥¨ã•ã‚Œã‚‹æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
1. **ã‚¿ã‚¹ã‚¯ 1.1** ã‹ã‚‰é–‹å§‹ï¼šDjangoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
2. ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆã—ã€ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
3. ã‚¢ãƒ—ãƒªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’ä½œæˆ

---

## ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é‡è¦ãªè¨­è¨ˆåŸå‰‡

<!-- å®Ÿè£…ä¸­ã«ç™ºè¦‹ã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨åŸå‰‡ -->

### Djangoã‚¢ãƒ—ãƒªæ§‹æˆ
- **æ©Ÿèƒ½å˜ä½ã®ã‚¢ãƒ—ãƒªåˆ†å‰²**: `core`, `guitar`, `progress`, `users`
- **ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®åˆ†é›¢**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯ `services.py` ã«å®Ÿè£…
- **èªè¨¼ã¯Djangoæ¨™æº–**: ã‚«ã‚¹ã‚¿ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«ã§æ‹¡å¼µ

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ â†’ URL â†’ ãƒ“ãƒ¥ãƒ¼ â†’ ã‚µãƒ¼ãƒ“ã‚¹ â†’ ãƒ¢ãƒ‡ãƒ« â†’ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
                â†“
            ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ â† ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- ã™ã¹ã¦ã®ä¿è­·ãƒšãƒ¼ã‚¸ã« `@login_required` ã‚’é©ç”¨
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã¯å¸¸ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- CSRFãƒˆãƒ¼ã‚¯ãƒ³å¿…é ˆ

---

## ãƒãƒ¼ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³

<!-- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ¡ãƒ¢ã€åˆ¶ç´„ã€ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ -->

### æŠ€è¡“çš„åˆ¶ç´„
- Python 3.11+ å¿…é ˆ
- Django 5.0+ å¿…é ˆ
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯HTML/CSS/JSï¼ˆReactç­‰ã¯ä½¿ç”¨ã—ãªã„ï¼‰

### è¦šãˆã¦ãŠãã¹ããƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ç›®æ¨™ç·´ç¿’æ™‚é–“ã¯5åˆ†
- ã‚¹ãƒˆãƒªãƒ¼ã‚¯ã¯é€£ç¶šç·´ç¿’æ—¥æ•°
- 1æ—¥ã®ç›®æ¨™é”æˆã§è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

### å¤–éƒ¨ä¾å­˜é–¢ä¿‚
- ãƒ¡ãƒ¼ãƒ«ã‚µãƒ¼ãƒãƒ¼ï¼ˆSMTPï¼‰
- Redisï¼ˆCeleryç”¨ï¼‰

### ãƒãƒ¼ãƒ ã®æ±ºå®šäº‹é …
- ã‚³ãƒ¡ãƒ³ãƒˆã¯æ—¥æœ¬èªã§è¨˜è¿°
- å°ã•ãªã‚³ãƒŸãƒƒãƒˆã‚’é‡è¦–
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Šã‚’ç›®æŒ‡ã™
